(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 7.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[    177177,       4484]
NotebookOptionsPosition[    174969,       4409]
NotebookOutlinePosition[    175444,       4428]
CellTagsIndexPosition[    175401,       4425]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Basic MadEvent Analysis Routines", "Title"],

Cell[TextData[{
 "by David Curtin (david.r.curtin@gmail.com)\n",
 StyleBox["based on Chameleon Package by Jessie Thaler, Natalia Toro and \
Philip Schuster, 2005 ",
  FontWeight->"Bold"],
 "(http://v1.jthaler.net/olympics/software.html)\n\n"
}], "Text"],

Cell["", "Text"],

Cell[CellGroupData[{

Cell["Saving & Loading non-LHS/LHCO files", "Subtitle"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"SaveIt", "[", 
     RowBox[{"filename_", ",", " ", "expr_"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "output", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"output", "=", 
        RowBox[{"Export", "[", 
         RowBox[{
          RowBox[{"filename", "<>", "\"\<.dat\>\""}], ",", " ", 
          RowBox[{"ToString", "[", 
           RowBox[{"expr", "//", "InputForm"}], "]"}], ",", " ", 
          "\"\<String\>\""}], "]"}]}], ";", "\[IndentingNewLine]", 
       "ClearMemory", ";", "\[IndentingNewLine]", "output"}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"SaveIt", "[", "varnamestring_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "output", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"output", "=", 
        RowBox[{"Export", "[", 
         RowBox[{
          RowBox[{"varnamestring", "<>", "\"\<.dat\>\""}], ",", " ", 
          RowBox[{"ToString", "[", 
           RowBox[{
            RowBox[{"ToExpression", "[", "varnamestring", "]"}], "//", 
            "InputForm"}], "]"}], ",", " ", "\"\<String\>\""}], "]"}]}], ";", 
       "\[IndentingNewLine]", "ClearMemory", ";", "\[IndentingNewLine]", 
       "output"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ReadIt", "[", "filename_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "output", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"output", "=", 
        RowBox[{"ToExpression", "[", 
         RowBox[{"Import", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"StringReplace", "[", 
             RowBox[{"filename", ",", 
              RowBox[{"\"\<.dat\>\"", "\[Rule]", "\"\<\>\""}]}], "]"}], "<>", 
            "\"\<.dat\>\""}], ",", " ", "\"\<String\>\""}], "]"}], "]"}]}], 
       ";", "\[IndentingNewLine]", "ClearMemory", ";", "\[IndentingNewLine]", 
       "output"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "crop", " ", "the", " ", "image", " ", "after", " ", "exporting", " ", 
    "it"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ExportCrop", "[", 
     RowBox[{"path_", ",", "toimage_", ",", " ", "borderpixels_"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Export", "[", 
        RowBox[{"path", ",", "toimage"}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"fiximage", " ", "=", " ", 
        RowBox[{"Import", "[", "path", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"imagedim", " ", "=", 
        RowBox[{"ImageDimensions", "[", "fiximage", "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"fixedimage", " ", "=", " ", 
        RowBox[{"ImageCrop", "[", 
         RowBox[{"ImageTake", "[", 
          RowBox[{"fiximage", ",", 
           RowBox[{"{", 
            RowBox[{"0", ",", 
             RowBox[{
              RowBox[{"imagedim", "[", 
               RowBox[{"[", "2", "]"}], "]"}], "-", "borderpixels"}]}], "}"}],
            ",", 
           RowBox[{"{", 
            RowBox[{"4", ",", 
             RowBox[{
              RowBox[{"imagedim", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "-", "borderpixels"}]}], 
            "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"Export", "[", 
        RowBox[{"path", ",", "fixedimage"}], "]"}]}]}], "\[IndentingNewLine]",
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "crop", " ", "the", " ", "image", " ", "after", " ", "exporting", " ", 
    "it"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ExportCrop", "[", 
     RowBox[{
     "path_", ",", "toimage_", ",", " ", "borderpixels1_", ",", 
      "borderpixels2_"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Export", "[", 
        RowBox[{"path", ",", "toimage"}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"fiximage", " ", "=", " ", 
        RowBox[{"Import", "[", "path", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"imagedim", " ", "=", 
        RowBox[{"ImageDimensions", "[", "fiximage", "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"fixedimage", " ", "=", " ", 
        RowBox[{"ImageCrop", "[", 
         RowBox[{"ImageTake", "[", 
          RowBox[{"fiximage", ",", 
           RowBox[{"{", 
            RowBox[{"0", ",", 
             RowBox[{
              RowBox[{"imagedim", "[", 
               RowBox[{"[", "2", "]"}], "]"}], "-", "borderpixels1"}]}], 
            "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"4", ",", 
             RowBox[{
              RowBox[{"imagedim", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "-", "borderpixels2"}]}], 
            "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"Export", "[", 
        RowBox[{"path", ",", "fixedimage"}], "]"}]}]}], "\[IndentingNewLine]",
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Arrange1Din2Dgrid", "[", 
     RowBox[{"list1D_", ",", "wanteddimensions_"}], "]"}], ":=", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Join", "[", 
        RowBox[{"list1D", ",", " ", 
         RowBox[{"Table", "[", 
          RowBox[{"\"\<\>\"", ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"wanteddimensions", "[", 
               RowBox[{"[", "1", "]"}], "]"}], 
              RowBox[{"wanteddimensions", "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "-", 
             RowBox[{"Length", "[", "list1D", "]"}]}], "}"}]}], "]"}]}], 
        "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"col", "+", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"row", "-", "1"}], ")"}], 
          RowBox[{"(", 
           RowBox[{"wanteddimensions", "[", 
            RowBox[{"[", "2", "]"}], "]"}], ")"}]}]}], "]"}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"row", ",", "1", ",", 
        RowBox[{"wanteddimensions", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"col", ",", "1", ",", 
        RowBox[{"wanteddimensions", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ImageDumpCrop", "[", "x_", "]"}], ":=", 
    RowBox[{"ExportCrop", "[", 
     RowBox[{
     "\"\<E:\\\\Documents\\\\uni\\\\Research\\\\SUSY gaugino mass \
project\\\\mathematica notebooks\\\\Calculations for our own GKK \
model\\\\image.png\>\"", ",", "x", ",", "5"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ImageDump", "[", "x_", "]"}], ":=", 
    RowBox[{"Export", "[", 
     RowBox[{
     "\"\<E:\\\\Documents\\\\uni\\\\Research\\\\SUSY gaugino mass \
project\\\\mathematica notebooks\\\\Calculations for our own GKK \
model\\\\image.png\>\"", ",", "x"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ImageDumpCrop", "[", 
    RowBox[{"filename_", ",", "x_"}], "]"}], ":=", 
   RowBox[{"ExportCrop", "[", 
    RowBox[{
     RowBox[{
     "\"\<E:\\\\Documents\\\\uni\\\\Research\\\\SUSY gaugino mass \
project\\\\mathematica notebooks\\\\Calculations for our own GKK \
model\\\\imagesSU1\\\\\>\"", "<>", "filename", "<>", "\"\<.png\>\""}], ",", 
     "x", ",", "3"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ImageDumpCrop", "[", 
    RowBox[{"filename_", ",", "x_", ",", " ", "borderpixels_"}], "]"}], ":=", 
   RowBox[{"ExportCrop", "[", 
    RowBox[{
     RowBox[{
     "\"\<E:\\\\Documents\\\\uni\\\\Research\\\\SUSY gaugino mass \
project\\\\mathematica notebooks\\\\Calculations for our own GKK \
model\\\\imagesSU1\\\\\>\"", "<>", "filename", "<>", "\"\<.png\>\""}], ",", 
     "x", ",", "borderpixels"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ImageDump", "[", 
     RowBox[{"filename_", ",", "x_"}], "]"}], ":=", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{
      "\"\<E:\\\\Documents\\\\uni\\\\Research\\\\SUSY gaugino mass \
project\\\\mathematica notebooks\\\\Calculations for our own GKK \
model\\\\imagesSU1\\\\\>\"", "<>", "filename", "<>", "\"\<.png\>\""}], ",", 
      "x"}], "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "I", " ", "think", " ", "this", " ", "might", " ", "help", " ", "with", 
    " ", "the", " ", "memory", " ", "bloat"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ClearMemory", ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Unprotect", "[", 
       RowBox[{"In", ",", "Out"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"Clear", "[", 
       RowBox[{"In", ",", "Out"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"Protect", "[", 
       RowBox[{"In", ",", "Out"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"ClearSystemCache", "[", "]"}], ";"}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}], "\[IndentingNewLine]"}], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Read Events [MGME LHE, pythia LHE, PGS]", "Subtitle"],

Cell["read MGME LHE events", "Text"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
     "quick", " ", "way", " ", "to", " ", "read", " ", "the", " ", "events"}],
      "..."}], " ", "put", " ", "all", " ", "that", " ", "stuff", " ", "into",
     " ", "a", " ", "function"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"ReadEvents", "[", "filename_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"eventListp", ",", " ", "eventListOutLp", ",", " ", "Nev"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Print", "[", 
        RowBox[{"\"\<Time taken to read events: \>\"", ",", 
         RowBox[{
          RowBox[{"Timing", "[", 
           RowBox[{
            RowBox[{"testp", "=", 
             RowBox[{"Import", "[", 
              RowBox[{"filename", ",", "\"\<Table\>\""}], "]"}]}], ";"}], 
           "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"Timing", "[", 
        RowBox[{
         RowBox[{"eventListp", "=", 
          RowBox[{"ReadME", "[", "testp", "]"}]}], ";"}], " ", "]"}], ";", 
       " ", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{
         "convert", " ", "raw", " ", "data", " ", "into", " ", "chameleon"}], 
         "-", 
         RowBox[{"readable", " ", "form"}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"Nev", " ", "=", " ", 
        RowBox[{
         RowBox[{"Length", "[", "eventListp", "]"}], "-", "1"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"eventListOutLp", "=", 
        RowBox[{"SetOut", "[", "eventListp", "]"}]}], ";", " ", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"remove", " ", "initial", " ", "particle", " ", 
          RowBox[{"info", " ", "--"}], " ", "boring", " ", "for", " ", "e"}], 
         "+", "e", "-", " ", "collider"}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"eventListp", ",", " ", "eventListOutLp", ",", " ", "Nev"}], 
        "}"}]}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"new", " ", "version", " ", "of", " ", "this", " ", 
    RowBox[{"function", ":", " ", 
     RowBox[{
     "discards", " ", "dummy", " ", "empty", " ", "entry", " ", "at", " ", 
      "end", " ", "of", " ", "eventslist"}]}]}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"ReadEvents", "[", "filename_", "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"eventListp", ",", " ", "eventListOutLp"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Print", "[", 
         RowBox[{"\"\<Time taken to read events: \>\"", ",", 
          RowBox[{
           RowBox[{"Timing", "[", 
            RowBox[{
             RowBox[{"testp", "=", 
              RowBox[{"Import", "[", 
               RowBox[{"filename", ",", "\"\<Table\>\""}], "]"}]}], ";"}], 
            "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"Timing", "[", 
         RowBox[{
          RowBox[{"eventListp", "=", 
           RowBox[{"ReadME", "[", "testp", "]"}]}], ";"}], " ", "]"}], ";", 
        " ", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{
          "convert", " ", "raw", " ", "data", " ", "into", " ", "chameleon"}],
           "-", 
          RowBox[{"readable", " ", "form"}]}], "*)"}], "\[IndentingNewLine]", 
        RowBox[{"eventListp", " ", "=", " ", 
         RowBox[{"eventListp", "[", 
          RowBox[{"[", 
           RowBox[{"1", ";;", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"Length", "[", "eventListp", "]"}], "-", "1"}], ")"}]}],
            "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{"drop", " ", "dummy", " ", "event", " ", "at", " ", "end"}], 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{"eventListOutLp", "=", 
         RowBox[{"SetOut", "[", "eventListp", "]"}]}], ";", " ", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{"remove", " ", "initial", " ", "particle", " ", 
           RowBox[{"info", " ", "--"}], " ", "boring", " ", "for", " ", "e"}],
           "+", "e", "-", " ", "collider"}], "*)"}], "\[IndentingNewLine]", 
        "ClearMemory", ";", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"eventListp", ",", " ", "eventListOutLp"}], "}"}]}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"ReadME", "[", "rawInput_", " ", "]"}], " ", ":=", " ", 
     "\[IndentingNewLine]", 
     RowBox[{"(", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "Search", " ", "for", " ", "beginning", " ", "of", " ", "events"}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"pos", "=", 
        RowBox[{
         RowBox[{"Position", "[", 
          RowBox[{"rawInput", ",", 
           RowBox[{"{", "\"\<</init>\>\"", "}"}]}], "]"}], "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ";", " ", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{
         "Throw", " ", "away", " ", "crap", " ", "at", " ", "start", " ", 
          "of", " ", "file"}], ",", " ", 
         RowBox[{"combine", " ", "events", " ", "in", " ", 
          RowBox[{"{", "}"}], " ", "array", " ", "and", " ", "remove", " ", 
          "the", " ", "XML", " ", "commands", " ", "and", " ", "compulsory", 
          " ", "eventinfo"}]}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{"DeleteCases", "[", 
        RowBox[{
         RowBox[{"Split", "[", 
          RowBox[{
           RowBox[{"Drop", "[", " ", 
            RowBox[{"rawInput", ",", " ", "pos"}], "]"}], ",", 
           RowBox[{
            RowBox[{"#", "=!=", 
             RowBox[{"{", "\"\<</event>\>\"", "}"}]}], "&"}]}], "]"}], ",", 
         RowBox[{
          RowBox[{"{", "\"\<<event>\>\"", "}"}], "|", 
          RowBox[{"{", "\"\<</LesHouchesEvents>\>\"", "}"}], "|", " ", 
          RowBox[{"{", "\"\<</event>\>\"", "}"}], " ", "|", " ", 
          "eventInfo"}], ",", "2"}], "]"}]}], "\[IndentingNewLine]", ")"}]}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]"}]}]], "Input"],

Cell["read pythia LHE events", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ReadEventsPythia", "[", "filename_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"eventListp", ",", " ", "eventListOutLp"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Print", "[", 
        RowBox[{"\"\<Time taken to read events: \>\"", ",", 
         RowBox[{
          RowBox[{"Timing", "[", 
           RowBox[{
            RowBox[{"testp", "=", 
             RowBox[{"Import", "[", 
              RowBox[{"filename", ",", "\"\<Table\>\""}], "]"}]}], ";"}], 
           "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"Timing", "[", 
        RowBox[{
         RowBox[{"eventListp", "=", 
          RowBox[{"ReadMEPythia", "[", "testp", "]"}]}], ";"}], " ", "]"}], 
       ";", " ", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{
         "convert", " ", "raw", " ", "data", " ", "into", " ", "chameleon"}], 
         "-", 
         RowBox[{"readable", " ", "form"}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"eventListp", " ", "=", " ", 
        RowBox[{"eventListp", "[", 
         RowBox[{"[", 
          RowBox[{"1", ";;", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Length", "[", "eventListp", "]"}], "-", "1"}], ")"}]}], 
          "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"drop", " ", "dummy", " ", "event", " ", "at", " ", "end"}], 
        "*)"}], "\[IndentingNewLine]", 
       RowBox[{"eventListOutLp", "=", 
        RowBox[{"SetOut", "[", "eventListp", "]"}]}], ";", " ", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"remove", " ", "initial", " ", "particle", " ", 
          RowBox[{"info", " ", "--"}], " ", "boring", " ", "for", " ", "e"}], 
         "+", "e", "-", " ", "collider"}], "*)"}], "\[IndentingNewLine]", 
       "ClearMemory", ";", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"eventListp", ",", " ", "eventListOutLp"}], "}"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ReadMEPythia", "[", "rawInput_", " ", "]"}], " ", ":=", " ", 
   "\[IndentingNewLine]", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
     "Search", " ", "for", " ", "beginning", " ", "of", " ", "events"}], 
     "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"pos", "=", 
      RowBox[{
       RowBox[{"Position", "[", 
        RowBox[{"rawInput", ",", 
         RowBox[{"{", "\"\<<event>\>\"", "}"}]}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ";", " ", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{
       "Throw", " ", "away", " ", "crap", " ", "at", " ", "start", " ", "of", 
        " ", "file"}], ",", " ", 
       RowBox[{"combine", " ", "events", " ", "in", " ", 
        RowBox[{"{", "}"}], " ", "array", " ", "and", " ", "remove", " ", 
        "the", " ", "XML", " ", "commands", " ", "and", " ", "compulsory", 
        " ", "eventinfo"}]}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"pythiaout", "=", 
      RowBox[{"DeleteCases", "[", 
       RowBox[{
        RowBox[{"Split", "[", 
         RowBox[{
          RowBox[{"Drop", "[", " ", 
           RowBox[{"rawInput", ",", " ", "pos"}], "]"}], ",", 
          RowBox[{
           RowBox[{"#", "=!=", 
            RowBox[{"{", "\"\<</event>\>\"", "}"}]}], "&"}]}], "]"}], ",", 
        RowBox[{
         RowBox[{"{", "\"\<<event>\>\"", "}"}], "|", 
         RowBox[{"{", "\"\<</LesHouchesEvents>\>\"", "}"}], "|", " ", 
         RowBox[{"{", "\"\<</event>\>\"", "}"}], " ", "|", " ", "eventInfo"}],
         ",", "2"}], "]"}]}], ";", "\[IndentingNewLine]", "ClearMemory", ";", 
     "\[IndentingNewLine]", "pythiaout"}], "\[IndentingNewLine]", ")"}]}], 
  ";"}]}], "Input"],

Cell[TextData[{
 "\n",
 StyleBox["Reading PGS events into the same format we use for MGME events\n",
  FontWeight->"Bold"],
 "\nThe below code is also used in the automatic .m scripts to convert lots \
of lhe/lhco files to .dat files"
}], "Text"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "give", " ", "this", " ", "function", " ", "the", " ", "filename", " ", 
    "of", " ", "a", " ", "PGS", " ", "output", " ", "file", " ", "and", " ", 
    "it", " ", "gives", " ", "you", " ", "an", " ", "eventlist", " ", "in", 
    " ", "the", " ", "same", " ", "format", " ", "as", " ", "MGME", " ", 
    "output"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"ReadPGSEventsAsMGME", "[", "filename_", "]"}], ":=", 
    RowBox[{
     RowBox[{"ReadPGSEventFile", "[", "filename", "]"}], "//", 
     "ConvertPGSeventstoMGMEevents"}]}], ";"}]}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "give", " ", "this", " ", "function", " ", "the", " ", "filename", " ", 
    "of", " ", "the", " ", "PGS", " ", "output", " ", "file", " ", "and", " ", 
    RowBox[{"it", "'"}], "ll", " ", "give", " ", "you", " ", "a", " ", "list",
     " ", "of", " ", 
    RowBox[{"events", ".", " ", "Use"}], " ", "PGSEventPrint", " ", "to", " ",
     "show", " ", "a", " ", "single", " ", "event"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"ReadPGSEventFile", "[", "filename_", "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "SplitData", ",", "PGSreadfile", ",", "found", ",", "entry", ",", 
         "entryTableHeading", ",", "numevents", ",", "PGSeventlist"}], "}"}], 
       ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"SplitData", "[", "rawObjList_", "]"}], ":=", 
         RowBox[{"Split", "[", 
          RowBox[{
           RowBox[{"Drop", "[", 
            RowBox[{"rawObjList", ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"NumberQ", "[", 
                RowBox[{"rawObjList", "[", 
                 RowBox[{"[", 
                  RowBox[{"1", ",", "1"}], "]"}], "]"}], "]"}], ",", "0", ",",
                "1"}], "]"}]}], "]"}], ",", 
           RowBox[{
            RowBox[{"Less", "[", 
             RowBox[{
              RowBox[{"First", "[", "#1", "]"}], ",", 
              RowBox[{"First", "[", "#2", "]"}]}], "]"}], "&"}]}], "]"}]}], 
        ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"PGSreadfile", "=", 
         RowBox[{"SplitData", "[", 
          RowBox[{"Import", "[", 
           RowBox[{"filename", ",", "\"\<Table\>\""}], "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{
          "find", " ", "the", " ", "entry", " ", "in", " ", "the", " ", 
           "read", " ", "tabel", " ", "where", " ", "the", " ", "table", " ", 
           "starts"}], ",", " ", 
          RowBox[{
           RowBox[{"i", ".", "e", ".", " ", "table"}], " ", 
           RowBox[{"header", ".", " ", "After"}], " ", "that", " ", 
           RowBox[{"it", "'"}], "s", " ", "normal", " ", "PGS", " ", 
           RowBox[{"events", "."}]}]}], "*)"}], "\[IndentingNewLine]", 
        RowBox[{"found", "=", "False"}], ";", "\[IndentingNewLine]", 
        RowBox[{"entry", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
        RowBox[{"While", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"found", "\[Equal]", "False"}], "&&", 
           RowBox[{"entry", "<", "  ", 
            RowBox[{"Length", "[", "PGSreadfile", "]"}]}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"entry", "++"}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"PGSreadfile", "[", 
               RowBox[{"[", "entry", "]"}], "]"}], "==", 
              RowBox[{"{", 
               RowBox[{"{", 
                RowBox[{
                "\"\<#\>\"", ",", "\"\<typ\>\"", ",", "\"\<eta\>\"", ",", 
                 "\"\<phi\>\"", ",", "\"\<pt\>\"", ",", "\"\<jmas\>\"", ",", 
                 "\"\<ntrk\>\"", ",", "\"\<btag\>\"", ",", "\"\<had/em\>\"", 
                 ",", "\"\<dum1\>\"", ",", "\"\<dum2\>\""}], "}"}], "}"}]}], 
             ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"found", "=", "True"}], ";"}]}], "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"entry", " ", "\[GreaterEqual]", "  ", 
           RowBox[{"Length", "[", "PGSreadfile", "]"}]}], ",", " ", 
          RowBox[{"entry", "=", "0"}]}], "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"entryTableHeading", " ", "=", " ", "entry"}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
         "get", " ", "total", " ", "number", " ", "of", " ", "events"}], 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{"numevents", " ", "=", " ", 
         RowBox[{
          RowBox[{"Length", "[", "PGSreadfile", "]"}], "-", 
          "entryTableHeading"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{"store", " ", "list", " ", "of", " ", "PGS", " ", "events"}],
          "*)"}], "\[IndentingNewLine]", 
        RowBox[{"PGSeventlist", " ", "=", " ", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"Drop", "[", 
            RowBox[{
             RowBox[{"PGSreadfile", "[", 
              RowBox[{"[", 
               RowBox[{"entryTableHeading", "+", "eventindex"}], "]"}], "]"}],
              ",", "1"}], "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"eventindex", ",", "1", ",", "numevents"}], "}"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", "ClearMemory", ";", 
        "\[IndentingNewLine]", "PGSeventlist"}]}], "\[IndentingNewLine]", 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"PGSEventPrint", "[", "PGSevent_", "]"}], ":=", 
     RowBox[{
      RowBox[{
       RowBox[{"Join", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"{", 
           RowBox[{
           "\"\<#\>\"", ",", "\"\<typ\>\"", ",", "\"\<eta\>\"", ",", 
            "\"\<phi\>\"", ",", "\"\<pt\>\"", ",", "\"\<jmas\>\"", ",", 
            "\"\<ntrk\>\"", ",", "\"\<btag\>\"", ",", "\"\<had/em\>\"", ",", 
            "\"\<dum1\>\"", ",", "\"\<dum2\>\""}], "}"}], "}"}], ",", " ", 
         "PGSevent"}], "]"}], "//", "MatrixForm"}], "//", "Print"}]}], 
    ";"}]}]}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "give", " ", "this", " ", "function", " ", "a", " ", "list", " ", "of", 
    " ", "PGS", " ", "events", " ", "that", " ", "have", " ", "been", " ", 
    "read", " ", "by", " ", "ReadPGSEventFile", " ", "and", " ", "it", " ", 
    "outputs", " ", "a", " ", "list", " ", "of", " ", "events", " ", "that", 
    " ", "is", " ", "in", " ", "the", " ", "same", " ", "format", " ", "as", 
    " ", "the", " ", "MGME", " ", "events"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"ConvertPGSeventstoMGMEevents", "[", "PGSevents_", "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", "output", "}"}], ",", " ", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"output", " ", "=", " ", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"PGSevents", "[", 
              RowBox[{"[", "eventindex", "]"}], "]"}], "[", 
             RowBox[{"[", "particleindex", "]"}], "]"}], "//", 
            "ConvertPGSparticletoMGMEparticle"}], ",", 
           RowBox[{"{", 
            RowBox[{"eventindex", ",", "1", ",", 
             RowBox[{"Length", "[", "PGSevents", "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"particleindex", ",", "1", ",", 
             RowBox[{"Length", "[", 
              RowBox[{"PGSevents", "[", 
               RowBox[{"[", "eventindex", "]"}], "]"}], "]"}]}], "}"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"ClearMemory", "[", "]"}], ";", "\[IndentingNewLine]", 
        "output"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "use", " ", "these", " ", "pointers", " ", "to", " ", "access", " ", 
     "entries", " ", "of", " ", "a", " ", "single", " ", "PGS", " ", 
     "event"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"typePGSINDEX", " ", "=", " ", "2"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"etaPGSINDEX", " ", "=", " ", "3"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"phiPGSINDEX", " ", "=", " ", "4"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ptPGSINDEX", " ", "=", " ", "5"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"jmasPGSINDEX", " ", "=", " ", "6"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ntrkPGSINDEX", "=", "7"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"btagPGSINDEX", "=", "8"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"ConvertPGSparticletoMGMEparticle", "[", "PGSparticle_", "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "currenttype", ",", "currenteta", ",", "currentphi", ",", "currentpt",
          ",", "currentjmas", ",", "currentntrk", ",", "currentbtag", ",", 
         "currentpx", ",", "currentpy", ",", "currenttheta", ",", "currentpz",
          ",", "currentPID"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
        "load", " ", "parameters", " ", "of", " ", "this", " ", "particle", 
         " ", "into"}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"currenttype", " ", "=", " ", 
         RowBox[{"PGSparticle", "[", 
          RowBox[{"[", "typePGSINDEX", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"currenteta", " ", "=", " ", 
         RowBox[{"PGSparticle", "[", 
          RowBox[{"[", "etaPGSINDEX", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"currentphi", " ", "=", " ", 
         RowBox[{"PGSparticle", "[", 
          RowBox[{"[", "phiPGSINDEX", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"currentpt", " ", "=", " ", 
         RowBox[{"PGSparticle", "[", 
          RowBox[{"[", "ptPGSINDEX", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"currentjmas", " ", "=", " ", 
         RowBox[{"PGSparticle", "[", 
          RowBox[{"[", "jmasPGSINDEX", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"currentntrk", " ", "=", " ", 
         RowBox[{"PGSparticle", "[", 
          RowBox[{"[", "ntrkPGSINDEX", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"currentbtag", "=", 
         RowBox[{"PGSparticle", "[", 
          RowBox[{"[", "btagPGSINDEX", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"currentpx", " ", "=", " ", 
         RowBox[{"currentpt", " ", 
          RowBox[{"Cos", "[", "currentphi", "]"}]}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"currentpy", " ", "=", " ", 
         RowBox[{"currentpt", " ", 
          RowBox[{"Sin", "[", "currentphi", "]"}]}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"currenttheta", " ", "=", " ", 
         RowBox[{"2", " ", 
          RowBox[{"ArcTan", "[", 
           RowBox[{"Exp", "[", 
            RowBox[{"-", "currenteta"}], "]"}], "]"}]}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"currentpz", " ", "=", " ", 
         FractionBox["currentpt", 
          RowBox[{"Tan", "[", "currenttheta", "]"}]]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{
          "note", " ", "we", " ", "are", " ", "discarding", " ", "some", " ", 
           "\[Tau]", " ", "information", " ", 
           RowBox[{"here", " ", "--"}], " ", "namely"}], ",", " ", 
          RowBox[{
          "whether", " ", "it", " ", "decayed", " ", "via", " ", "three", " ",
            "prongs", " ", 
           RowBox[{"(", 
            RowBox[{"ntrk", " ", "=", " ", 
             RowBox[{"\[PlusMinus]", " ", "3"}]}], ")"}], " ", "or", " ", 
           "one", " ", "prong", " ", 
           RowBox[{"(", 
            RowBox[{"ntrk", " ", "=", " ", 
             RowBox[{"\[PlusMinus]", " ", "1"}]}], ")"}]}]}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
         "we", " ", "are", " ", "also", " ", "discarding", " ", "whether", 
          " ", "the", " ", "tagged", " ", "b", " ", "was", " ", "tight", " ", 
          RowBox[{"(", 
           RowBox[{"btag", " ", "=", " ", "2"}], ")"}], " ", "or", " ", 
          "loose", " ", 
          RowBox[{"(", 
           RowBox[{"btag", " ", "=", " ", "1"}], ")"}]}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"Which", "[", "\[IndentingNewLine]", 
         RowBox[{"(*", "photon", "*)"}], "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"currenttype", "\[Equal]", "0"}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", "22"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"e", "+"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", "\[Equal]", "1"}], "&&", 
           RowBox[{"currentntrk", "\[Equal]", "1"}]}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", 
           RowBox[{"-", "11"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"e", "-"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", "\[Equal]", "1"}], "&&", 
           RowBox[{"currentntrk", "\[Equal]", 
            RowBox[{"-", "1"}]}]}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", "11"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"\[Mu]", "+"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", "\[Equal]", "2"}], "&&", 
           RowBox[{"currentntrk", "\[Equal]", "1"}]}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", 
           RowBox[{"-", "13"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"\[Mu]", "-"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", "\[Equal]", "2"}], "&&", 
           RowBox[{"currentntrk", "\[Equal]", 
            RowBox[{"-", "1"}]}]}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", "13"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"\[Tau]", "+"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", "\[Equal]", "3"}], "&&", 
           RowBox[{"currentntrk", ">", "0"}]}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", 
           RowBox[{"-", "15"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"\[Tau]", "-"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", "\[Equal]", "3"}], "&&", 
           RowBox[{"currentntrk", "<", "0"}]}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", "15"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", "b", "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", "\[Equal]", "4"}], "&&", 
           RowBox[{"currentbtag", ">", "0"}]}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", "5"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"other", " ", 
            RowBox[{"jet", ":", " ", 
             RowBox[{"label", " ", "as", " ", "gluon"}]}]}], "*)"}], 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currenttype", " ", "\[Equal]", "4"}], " ", "&&", " ", 
           RowBox[{"currentbtag", "\[Equal]", "0"}]}], ",", " ", 
          RowBox[{"currentPID", "=", " ", "21"}], ",", "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"MET", ":", " ", 
            RowBox[{
             RowBox[{"label", " ", "as", " ", "electron"}], "-", 
             "neutrino"}]}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{"currenttype", "\[Equal]", "6"}], ",", " ", 
          RowBox[{"currentPID", " ", "=", " ", "12"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
         "currentPID", ",", "1", ",", "0", ",", "0", ",", "0", ",", "0", ",", 
          "currentpx", ",", "currentpy", ",", "currentpz", ",", 
          SqrtBox[
           RowBox[{
            SuperscriptBox["currentpx", "2"], "+", 
            SuperscriptBox["currentpy", "2"], "+", 
            SuperscriptBox["currentpz", "2"]}]], ",", "currentjmas", ",", "0",
           ",", "0"}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], 
    ";"}]}]}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ReadPGSEventFileAsMGME", "[", "filename_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "temp", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"temp", "=", 
       RowBox[{"ReadPGSEventFile", "[", "filename", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"ConvertPGSparticletoMGMEparticle", "[", "temp", "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["EventPrint", "Subtitle"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "MAKE", " ", "SURE", " ", "TO", " ", "UPDATE", " ", "THIS", " ", "IF", " ",
     "YOU", " ", "HAVE", " ", "A", " ", "NEW", " ", "INVISIBLE", " ", 
    "PARTICLE"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"invisiblelist", "=", 
   RowBox[{"{", 
    RowBox[{"12", ",", 
     RowBox[{"-", "12"}], ",", "14", ",", 
     RowBox[{"-", "14"}], ",", "16", ",", 
     RowBox[{"-", "16"}], ",", "1000022"}], "}"}]}]}]], "Input"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"12", ",", 
   RowBox[{"-", "12"}], ",", "14", ",", 
   RowBox[{"-", "14"}], ",", "16", ",", 
   RowBox[{"-", "16"}], ",", "1000022"}], "}"}]], "Output"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "Based", " ", "on", " ", "the", " ", "Chameleon", " ", "package", " ", 
     "by", " ", "Philip", " ", "Shuster"}], ",", " ", 
    RowBox[{"Jesse", " ", "Thaler"}], ",", " ", 
    RowBox[{"Natalia", " ", "Toro"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "Modified", " ", "by", " ", "Maxim", " ", "Perelstein", " ", "and", " ", 
     "Andi", " ", "Weiler"}], ",", " ", 
    RowBox[{"2008", "-", "09"}]}], " ", "*)"}], "\[IndentingNewLine]", "\n", 
  RowBox[{"(*", 
   RowBox[{
   "format", " ", "of", " ", "the", " ", "compulsory", " ", "event", " ", 
    "vector"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"eventInfo", "=", 
     RowBox[{"{", 
      RowBox[{"_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_"}], 
      "}"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ClearAll", "[", 
     RowBox[{"particle", ",", "finout"}], "]"}], ";"}], "\[IndentingNewLine]",
    "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"PDG", " ", "numbers", " ", "see", " ", 
      RowBox[{"e", ".", "g", ".", " ", 
       RowBox[{"http", ":"}]}]}], "//", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"home", ".", "fnal", ".", "gov"}], "/", 
          RowBox[{"~", "maeshima"}]}], "/", "alignment"}], "/", "ORCA"}], "/",
        "PYTHIA_particle"}], 
      RowBox[{"_codes", ".", "ps"}]}]}], "*)"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"2", ",", 
      RowBox[{"-", "2"}], ",", "1", ",", 
      RowBox[{"-", "1"}], ",", "3", ",", 
      RowBox[{"-", "3"}], ",", "4", ",", 
      RowBox[{"-", "4"}], ",", "5", ",", 
      RowBox[{"-", "5"}], ",", "6", ",", 
      RowBox[{"-", "6"}], ",", "21"}], "}"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDu", "=", " ", "2"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDubar", " ", "=", " ", 
     RowBox[{"-", "2"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDd", " ", "=", " ", "1"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDdbar", " ", "=", " ", 
     RowBox[{"-", "1"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDs", " ", "=", " ", "3"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDsbar", " ", "=", " ", 
     RowBox[{"-", "3"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDc", " ", "=", " ", "4"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDcbar", " ", "=", " ", 
     RowBox[{"-", "4"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDb", " ", "=", " ", "5"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDbbar", " ", "=", " ", 
     RowBox[{"-", "5"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDt", " ", "=", " ", "6"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDtbar", " ", "=", " ", 
     RowBox[{"-", "6"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDeminus", " ", "=", " ", "11"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDeplus", " ", "=", " ", 
     RowBox[{"-", "11"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDnue", "=", "12"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDnuebar", " ", "=", " ", 
     RowBox[{"-", "12"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDmuminus", " ", "=", " ", "13"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDmuplus", " ", "=", 
     RowBox[{"-", "13"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDnumu", " ", "=", " ", "14"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDnumubar", " ", "=", " ", 
     RowBox[{"-", "14"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDtauminus", " ", "=", " ", "15"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDtauplus", " ", "=", " ", 
     RowBox[{"-", "15"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDnutau", " ", "=", " ", "16"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDnutaubar", " ", "=", " ", 
     RowBox[{"-", "16"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDgluon", " ", "=", " ", "21"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDphoton", " ", "=", " ", "22"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDZ", " ", "=", " ", "23"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDWplus", " ", "=", " ", "24"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDWminus", " ", "=", " ", 
     RowBox[{"-", "24"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PIDh", " ", "=", " ", "25"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "2", "]"}], " ", "=", "\"\<u\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "2"}], "]"}], " ", "=", "\"\<uBar\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "1", "]"}], " ", "=", "\"\<d\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "1"}], "]"}], " ", "=", "\"\<dBar\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "3", "]"}], " ", "=", "\"\<s\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "3"}], "]"}], " ", "=", "\"\<sBar\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "4", "]"}], " ", "=", "\"\<c\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "4"}], "]"}], " ", "=", "\"\<cBar\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "5", "]"}], " ", "=", "\"\<b\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "5"}], "]"}], " ", "=", "\"\<bBar\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "6", "]"}], " ", "=", "\"\<t\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "6"}], "]"}], " ", "=", "\"\<tBar\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "11", "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[\(e\), \(-\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "11"}], "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[\(e\), \(+\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "12", "]"}], " ", "=", 
     "\"\<\!\(\*SubscriptBox[\(\[Vee]\), \(e\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "12"}], "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[SubscriptBox[\(\[Vee]\), \(e\)], \
\(c\)]\)\>\""}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "13", "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[\(\[Mu]\), \(-\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "13"}], "]"}], "=", 
     "\"\<\!\(\*SuperscriptBox[\(\[Mu]\), \(+\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "14", "]"}], " ", "=", 
     "\"\<\!\(\*SubscriptBox[\(\[Vee]\), \(\[Mu]\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "14"}], "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[SubscriptBox[\(\[Vee]\), \(\[Mu]\)], \
\(c\)]\)\>\""}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "15", "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[\(\[Tau]\), \(-\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "15"}], "]"}], "=", 
     "\"\<\!\(\*SuperscriptBox[\(\[Tau]\), \(+\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "16", "]"}], " ", "=", 
     "\"\<\!\(\*SubscriptBox[\(\[Vee]\), \(\[Tau]\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "16"}], "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[SubscriptBox[\(\[Vee]\), \(\[Tau]\)], \(c\)]\)\
\>\""}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "21", "]"}], " ", "=", "\"\<gluon\>\""}], ";"}],
    "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "22", "]"}], " ", "=", " ", 
     "\"\<\[Gamma]\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "23", "]"}], " ", "=", " ", "\"\<Z\>\""}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "24", "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[\(W\), \(+\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "24"}], "]"}], " ", "=", " ", 
     "\"\<\!\(\*SuperscriptBox[\(W\), \(-\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "1000006", "]"}], " ", "=", 
     "\"\<\!\(\*SubscriptBox[OverscriptBox[\(t\), \(~\)], \(1\)]\)\>\""}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "1000006"}], "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[SubscriptBox[OverscriptBox[\(t\), \(~\)], \
\(1\)], \(*\)]\)\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "1000022", "]"}], " ", "=", 
     "\"\<\!\(\*SuperscriptBox[SubscriptBox[OverscriptBox[\(\[Chi]\), \(~\)], \
\(1\)], \(0\)]\)\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "1000021", "]"}], " ", "=", " ", 
     "\"\<\!\(\*OverscriptBox[\(g\), \(~\)]\)\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "1000005", "]"}], "=", 
     "\"\<\!\(\*SubscriptBox[OverscriptBox[\(b\), \(~\)], \(1\)]\)\>\""}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "1000005"}], "]"}], "=", 
     "\"\<\!\(\*SubscriptBox[OverscriptBox[\(b\), \(~\)], \(1\)]\)*\>\""}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "2000001", "]"}], "=", 
     "\"\<\!\(\*OverscriptBox[SubscriptBox[\(d\), \(R\)], \(~\)]\)\>\""}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "2000001"}], "]"}], "=", 
     "\"\<\!\(\*OverscriptBox[SubscriptBox[\(d\), \(R\)], \(~\)]\)*\>\""}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "2000002", "]"}], "=", 
     "\"\<\!\(\*OverscriptBox[SubscriptBox[\(u\), \(R\)], \(~\)]\)\>\""}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", 
      RowBox[{"-", "2000002"}], "]"}], "=", 
     "\"\<\!\(\*OverscriptBox[SubscriptBox[\(u\), \(R\)], \(~\)]\)*\>\""}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "25", "]"}], " ", "=", " ", "\"\<h\>\""}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "for", " ", "exotic", " ", "higgs", " ", "decay", " ", "analysis", " ", 
     "using", " ", 
     RowBox[{"Prerit", "'"}], "s", "  ", "omdel"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "45", "]"}], " ", "=", " ", "\"\<a\>\""}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"particle", "[", "46", "]"}], " ", "=", " ", "\"\<a'\>\""}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"finout", "[", 
      RowBox[{"-", "1"}], "]"}], " ", "=", " ", "\"\<in\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"finout", "[", "1", "]"}], " ", "=", " ", "\"\<out\>\""}], ";"}],
    "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"finout", "[", "2", "]"}], "  ", "=", " ", "\"\<decayed\>\""}], 
    ";"}], "\[IndentingNewLine]", "\n", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EventPrint", "[", "event_", "]"}], ":=", 
     RowBox[{"Which", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "[", 
         RowBox[{"event", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], " ", "\[Equal]", " ", "13"}],
        ",", " ", "\[IndentingNewLine]", 
       RowBox[{"EventPrintNoTag", "[", "event", "]"}], ",", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Length", "[", 
         RowBox[{"event", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], " ", "\[Equal]", " ", "14"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{"EventPrintTag", "[", "event", "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Length", "[", 
         RowBox[{"event", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], " ", "\[Equal]", "15"}], ",",
        "\[IndentingNewLine]", 
       RowBox[{"EventPrintRecon", "[", "event", "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Length", "[", 
         RowBox[{"event", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], "\[Equal]", "16"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"EventPrintComb", "[", "event", "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Length", "[", 
         RowBox[{"event", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], "\[Equal]", "17"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"EventPrintMCRecon", "[", "event", "]"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ClearAll", "[", 
     RowBox[{"x1", ",", "x2"}], "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EventPrintNoTag", "[", " ", "event_", " ", "]"}], " ", ":=", 
     " ", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "printevent", ",", " ", "numlist", ",", " ", "x1", ",", "x2", ",", 
         "x3", ",", "x4", ",", "x5", ",", "x6", ",", "x7", ",", "x8", ",", 
         "x9", ",", "x10", ",", "x11", ",", "x12", ",", "x13", ",", " ", 
         "x14", ",", "x15", ",", "x16", ",", "x17", ",", "x18", ",", "x19"}], 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"printevent", " ", "=", " ", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"{", 
             RowBox[{"pid", ",", " ", 
              RowBox[{"in", "/", "out"}], ",", "mother1", ",", "mother2", ",",
               "color1", ",", "color2", ",", " ", "px", ",", "py", ",", "pz", 
              ",", "p0", ",", "mass", ",", "6", ",", "hel"}], "}"}], "}"}], 
           ",", " ", 
           RowBox[{"(", 
            RowBox[{"event", "/.", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
               "x1_", ",", "x2_", ",", "x3_", ",", "x4_", ",", "x5_", ",", 
                "x6_", ",", "x7_", ",", "x8_", ",", "x9_", ",", "x10_", ",", 
                "x11_", ",", "x12_", ",", "x13_"}], "}"}], "->", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"particle", "[", "x1", "]"}], ",", 
                RowBox[{"finout", "[", "x2", "]"}], ",", "x3", ",", "x4", ",",
                 "x5", ",", "x6", ",", "x7", ",", "x8", ",", "x9", ",", "x10",
                 ",", "x11", ",", "x12", ",", "x13"}], "}"}]}]}], ")"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"numlist", " ", "=", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", "\"\<#\>\"", "}"}], ",", " ", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "[", "event", "]"}]}], "}"}]}], "]"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"Print", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"{", "numlist", "}"}], ",", 
             RowBox[{"Transpose", "[", "printevent", "]"}]}], "]"}], "//", 
           "Transpose"}], "//", "MatrixForm"}], "]"}], ";"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], " ", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EventPrintTag", "[", " ", "event_", " ", "]"}], " ", ":=", " ", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "printevent", ",", " ", "numlist", ",", " ", "x1", ",", "x2", ",", 
         "x3", ",", "x4", ",", "x5", ",", "x6", ",", "x7", ",", "x8", ",", 
         "x9", ",", "x10", ",", "x11", ",", "x12", ",", "x13", ",", " ", 
         "x14", ",", "x15", ",", "x16", ",", "x17", ",", "x18", ",", "x19"}], 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"printevent", " ", "=", " ", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"{", 
             RowBox[{"pid", ",", " ", 
              RowBox[{"in", "/", "out"}], ",", "mother1", ",", "mother2", ",",
               "color1", ",", "color2", ",", " ", "px", ",", "py", ",", "pz", 
              ",", "p0", ",", "mass", ",", "6", ",", "hel", ",", " ", 
              "\"\<tag\>\""}], "}"}], "}"}], ",", " ", 
           RowBox[{"(", 
            RowBox[{"event", "/.", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
               "x1_", ",", "x2_", ",", "x3_", ",", "x4_", ",", "x5_", ",", 
                "x6_", ",", "x7_", ",", "x8_", ",", "x9_", ",", "x10_", ",", 
                "x11_", ",", "x12_", ",", "x13_", ",", " ", "x14_"}], "}"}], "->", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"particle", "[", "x1", "]"}], ",", 
                RowBox[{"finout", "[", "x2", "]"}], ",", "x3", ",", "x4", ",",
                 "x5", ",", "x6", ",", "x7", ",", "x8", ",", "x9", ",", "x10",
                 ",", "x11", ",", "x12", ",", "x13", ",", 
                RowBox[{"tagname", "[", "x14", "]"}]}], "}"}]}]}], ")"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"numlist", " ", "=", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", "\"\<#\>\"", "}"}], ",", " ", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "[", "event", "]"}]}], "}"}]}], "]"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"Print", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"{", "numlist", "}"}], ",", 
             RowBox[{"Transpose", "[", "printevent", "]"}]}], "]"}], "//", 
           "Transpose"}], "//", "MatrixForm"}], "]"}], ";"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], " ", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EventPrintRecon", "[", " ", "event_", " ", "]"}], " ", ":=", 
     " ", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "printevent", ",", " ", "numlist", ",", " ", "x1", ",", "x2", ",", 
         "x3", ",", "x4", ",", "x5", ",", "x6", ",", "x7", ",", "x8", ",", 
         "x9", ",", "x10", ",", "x11", ",", "x12", ",", "x13", ",", " ", 
         "x14", ",", "x15", ",", "x16", ",", "x17", ",", "x18", ",", "x19"}], 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"printevent", " ", "=", " ", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"{", 
             RowBox[{"pid", ",", " ", 
              RowBox[{"in", "/", "out"}], ",", "mother1", ",", "mother2", ",",
               "color1", ",", "color2", ",", " ", "px", ",", "py", ",", "pz", 
              ",", "p0", ",", "mass", ",", "6", ",", "hel", ",", " ", 
              "\"\<tag\>\"", ",", " ", "\"\<recon\>\""}], "}"}], "}"}], ",", 
           " ", 
           RowBox[{"(", 
            RowBox[{"event", "/.", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
               "x1_", ",", "x2_", ",", "x3_", ",", "x4_", ",", "x5_", ",", 
                "x6_", ",", "x7_", ",", "x8_", ",", "x9_", ",", "x10_", ",", 
                "x11_", ",", "x12_", ",", "x13_", ",", " ", "x14_", ",", 
                "x15_"}], "}"}], "->", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"particle", "[", "x1", "]"}], ",", 
                RowBox[{"finout", "[", "x2", "]"}], ",", "x3", ",", "x4", ",",
                 "x5", ",", "x6", ",", "x7", ",", "x8", ",", "x9", ",", "x10",
                 ",", "x11", ",", "x12", ",", "x13", ",", 
                RowBox[{"tagname", "[", "x14", "]"}], ",", "x15"}], "}"}]}]}],
             ")"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"numlist", " ", "=", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", "\"\<#\>\"", "}"}], ",", " ", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "[", "event", "]"}]}], "}"}]}], "]"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"Print", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"{", "numlist", "}"}], ",", 
             RowBox[{"Transpose", "[", "printevent", "]"}]}], "]"}], "//", 
           "Transpose"}], "//", "MatrixForm"}], "]"}], ";"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], " ", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EventPrintComb", "[", " ", "event_", " ", "]"}], " ", ":=", " ", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "printevent", ",", " ", "numlist", ",", " ", "x1", ",", "x2", ",", 
         "x3", ",", "x4", ",", "x5", ",", "x6", ",", "x7", ",", "x8", ",", 
         "x9", ",", "x10", ",", "x11", ",", "x12", ",", "x13", ",", " ", 
         "x14", ",", "x15", ",", "x16", ",", "x17", ",", "x18", ",", "x19"}], 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"printevent", " ", "=", " ", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"{", 
             RowBox[{"pid", ",", " ", 
              RowBox[{"in", "/", "out"}], ",", "mother1", ",", "mother2", ",",
               "color1", ",", "color2", ",", " ", "px", ",", "py", ",", "pz", 
              ",", "p0", ",", "mass", ",", "6", ",", "hel", ",", " ", 
              "\"\<tag\>\"", ",", " ", "\"\<recon\>\"", ",", " ", 
              "\"\<comb\>\""}], "}"}], "}"}], ",", " ", 
           RowBox[{"(", 
            RowBox[{"event", "/.", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
               "x1_", ",", "x2_", ",", "x3_", ",", "x4_", ",", "x5_", ",", 
                "x6_", ",", "x7_", ",", "x8_", ",", "x9_", ",", "x10_", ",", 
                "x11_", ",", "x12_", ",", "x13_", ",", " ", "x14_", ",", 
                "x15_", ",", "x16_"}], "}"}], "->", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"particle", "[", "x1", "]"}], ",", 
                RowBox[{"finout", "[", "x2", "]"}], ",", "x3", ",", "x4", ",",
                 "x5", ",", "x6", ",", "x7", ",", "x8", ",", "x9", ",", "x10",
                 ",", "x11", ",", "x12", ",", "x13", ",", 
                RowBox[{"tagname", "[", "x14", "]"}], ",", "x15", ",", 
                "x16"}], "}"}]}]}], ")"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"numlist", " ", "=", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", "\"\<#\>\"", "}"}], ",", " ", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "[", "event", "]"}]}], "}"}]}], "]"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"Print", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"{", "numlist", "}"}], ",", 
             RowBox[{"Transpose", "[", "printevent", "]"}]}], "]"}], "//", 
           "Transpose"}], "//", "MatrixForm"}], "]"}], ";"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], " ", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EventPrintMCRecon", "[", " ", "event_", " ", "]"}], " ", ":=", 
     " ", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "printevent", ",", " ", "numlist", ",", " ", "x1", ",", "x2", ",", 
         "x3", ",", "x4", ",", "x5", ",", "x6", ",", "x7", ",", "x8", ",", 
         "x9", ",", "x10", ",", "x11", ",", "x12", ",", "x13", ",", " ", 
         "x14", ",", "x15", ",", "x16", ",", "x17", ",", "x18", ",", "x19"}], 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"printevent", " ", "=", " ", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"{", 
             RowBox[{"pid", ",", " ", 
              RowBox[{"in", "/", "out"}], ",", "mother1", ",", "mother2", ",",
               "color1", ",", "color2", ",", " ", "px", ",", "py", ",", "pz", 
              ",", "p0", ",", "mass", ",", "6", ",", "hel", ",", " ", 
              "\"\<tag\>\"", ",", " ", "\"\<recon\>\"", ",", " ", 
              "\"\<comb\>\"", ",", " ", "\"\<MCrecon\>\""}], "}"}], "}"}], 
           ",", " ", 
           RowBox[{"(", 
            RowBox[{"event", "/.", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
               "x1_", ",", "x2_", ",", "x3_", ",", "x4_", ",", "x5_", ",", 
                "x6_", ",", "x7_", ",", "x8_", ",", "x9_", ",", "x10_", ",", 
                "x11_", ",", "x12_", ",", "x13_", ",", " ", "x14_", ",", 
                "x15_", ",", "x16_", ",", " ", "x17_"}], "}"}], "->", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"particle", "[", "x1", "]"}], ",", 
                RowBox[{"finout", "[", "x2", "]"}], ",", "x3", ",", "x4", ",",
                 "x5", ",", "x6", ",", "x7", ",", "x8", ",", "x9", ",", "x10",
                 ",", "x11", ",", "x12", ",", "x13", ",", 
                RowBox[{"tagname", "[", "x14", "]"}], ",", "x15", ",", "x16", 
                ",", " ", "x17"}], "}"}]}]}], ")"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"numlist", " ", "=", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", "\"\<#\>\"", "}"}], ",", " ", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "[", "event", "]"}]}], "}"}]}], "]"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"Print", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"{", "numlist", "}"}], ",", 
             RowBox[{"Transpose", "[", "printevent", "]"}]}], "]"}], "//", 
           "Transpose"}], "//", "MatrixForm"}], "]"}], ";"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], " ", "\[IndentingNewLine]", 
   "\[IndentingNewLine]"}]}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell[" Histograming", "Subtitle"],

Cell[CellGroupData[{

Cell["basic 1D histograms", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"RescaledHistogram", "[", 
     RowBox[{
     "data_", ",", " ", "xsecmultiplier_", ",", "binspec_", ",", 
      "options___"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "bla", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"bla", "=", 
        RowBox[{"HistogramList", "[", 
         RowBox[{"data", ",", "binspec"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"ListPlot", "[", 
        RowBox[{
         RowBox[{"Transpose", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"Drop", "[", 
             RowBox[{
              RowBox[{"bla", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"-", "1"}]}], "]"}], ",", 
            RowBox[{"xsecmultiplier", " ", 
             RowBox[{"bla", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "]"}], ",", 
         RowBox[{"Joined", "\[Rule]", "True"}], ",", 
         RowBox[{"InterpolationOrder", "\[Rule]", "0"}], ",", " ", 
         "options"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"RescaledLogHistogram", "[", 
     RowBox[{
     "data_", ",", " ", "xsecmultiplier_", ",", "binspec_", ",", 
      "options___"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "bla", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"bla", "=", 
        RowBox[{"HistogramList", "[", 
         RowBox[{"data", ",", "binspec"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"ListLogPlot", "[", 
        RowBox[{
         RowBox[{"Transpose", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"Drop", "[", 
             RowBox[{
              RowBox[{"bla", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"-", "1"}]}], "]"}], ",", 
            RowBox[{"xsecmultiplier", " ", 
             RowBox[{"bla", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "]"}], ",", 
         RowBox[{"Joined", "\[Rule]", "True"}], ",", 
         RowBox[{"InterpolationOrder", "\[Rule]", "0"}], ",", " ", 
         "options"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"RescaledLogHistogramWithError", "[", 
     RowBox[{
     "data_", ",", " ", "xsecmultiplier_", ",", "binspec_", ",", 
      "options___"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"bla", ",", "upbla", ",", "downbla"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"bla", "=", 
        RowBox[{"HistogramList", "[", 
         RowBox[{"data", ",", "binspec"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"bla", "=", 
        RowBox[{"Transpose", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Drop", "[", 
            RowBox[{
             RowBox[{"bla", "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{"-", "1"}]}], "]"}], ",", " ", 
           RowBox[{"bla", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"upbla", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "+", 
             RowBox[{"Max", "[", 
              RowBox[{"1", ",", 
               SqrtBox[
                RowBox[{"#", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]]}], "]"}]}]}], "}"}], "&"}], "/@",
          "bla"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"downbla", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{
             SuperscriptBox["10", 
              RowBox[{"-", "12"}]], "+", " ", 
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "-", 
             SqrtBox[
              RowBox[{"#", "[", 
               RowBox[{"[", "2", "]"}], "]"}]]}]}], "}"}], "&"}], "/@", 
         "bla"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"Show", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"ListLogPlot", "[", 
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"Evaluate", "[", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{
                    FractionBox["xsecmultiplier", "10"], 
                    RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], "/@", 
                 "#"}], "&"}], "/@", 
               RowBox[{"{", "bla", "}"}]}], "]"}], ",", 
             RowBox[{"Evaluate", "[", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{"2", " ", "xsecmultiplier", " ", 
                    RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], "/@", 
                 "#"}], "&"}], "/@", 
               RowBox[{"{", "bla", "}"}]}], "]"}]}], "]"}], ",", 
           RowBox[{"Joined", "\[Rule]", "True"}], ",", 
           RowBox[{"InterpolationOrder", "\[Rule]", "0"}], ",", " ", 
           RowBox[{"PlotStyle", "\[Rule]", "None"}], ",", " ", "options"}], 
          "]"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
         RowBox[{"ListLogPlot", "[", 
          RowBox[{
           RowBox[{"Evaluate", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", 
                  RowBox[{"xsecmultiplier", 
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], "/@", 
               "#"}], "&"}], "/@", 
             RowBox[{"{", "bla", "}"}]}], "]"}], ",", 
           RowBox[{"Joined", "\[Rule]", "True"}], ",", 
           RowBox[{"InterpolationOrder", "\[Rule]", "0"}], ",", " ", 
           "options"}], "]"}], "\[IndentingNewLine]", ",", 
         "\[IndentingNewLine]", 
         RowBox[{"ListLogPlot", "[", 
          RowBox[{
           RowBox[{"Evaluate", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", 
                  RowBox[{"xsecmultiplier", 
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], "/@", 
               "#"}], "&"}], "/@", 
             RowBox[{"{", " ", 
              RowBox[{"upbla", ",", " ", "downbla"}], "}"}]}], "]"}], ",", 
           RowBox[{"Joined", "\[Rule]", "True"}], ",", 
           RowBox[{"InterpolationOrder", "\[Rule]", "0"}], ",", " ", 
           RowBox[{"PlotStyle", "\[Rule]", "None"}], ",", " ", 
           RowBox[{"Filling", "\[Rule]", 
            RowBox[{"{", 
             RowBox[{"1", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"{", "2", "}"}], ",", 
                RowBox[{"Directive", "[", 
                 RowBox[{"Gray", ",", 
                  RowBox[{"Opacity", "[", "0.3", "]"}]}], "]"}]}], "}"}]}], 
             "}"}]}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"RescaledHistogramWithError", "[", 
     RowBox[{
     "data_", ",", " ", "xsecmultiplier_", ",", "binspec_", ",", 
      "options___"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"bla", ",", "upbla", ",", "downbla"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"bla", "=", 
        RowBox[{"HistogramList", "[", 
         RowBox[{"data", ",", "binspec"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"bla", "=", 
        RowBox[{"Transpose", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Drop", "[", 
            RowBox[{
             RowBox[{"bla", "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{"-", "1"}]}], "]"}], ",", " ", 
           RowBox[{"bla", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"upbla", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "+", 
             RowBox[{"Max", "[", 
              RowBox[{"1", ",", 
               SqrtBox[
                RowBox[{"#", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]]}], "]"}]}]}], "}"}], "&"}], "/@",
          "bla"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"downbla", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "-", 
             SqrtBox[
              RowBox[{"#", "[", 
               RowBox[{"[", "2", "]"}], "]"}]]}]}], "}"}], "&"}], "/@", 
         "bla"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Show", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"ListPlot", "[", 
          RowBox[{
           RowBox[{"Evaluate", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", 
                  RowBox[{"xsecmultiplier", 
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], "/@", 
               "#"}], "&"}], "/@", 
             RowBox[{"{", "bla", "}"}]}], "]"}], ",", 
           RowBox[{"Joined", "\[Rule]", "True"}], ",", 
           RowBox[{"InterpolationOrder", "\[Rule]", "0"}], ",", " ", 
           "options"}], "]"}], "\[IndentingNewLine]", ",", 
         "\[IndentingNewLine]", 
         RowBox[{"ListPlot", "[", 
          RowBox[{
           RowBox[{"Evaluate", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", 
                  RowBox[{"xsecmultiplier", 
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], "/@", 
               "#"}], "&"}], "/@", 
             RowBox[{"{", " ", 
              RowBox[{"upbla", ",", " ", "downbla"}], "}"}]}], "]"}], ",", 
           RowBox[{"Joined", "\[Rule]", "True"}], ",", 
           RowBox[{"InterpolationOrder", "\[Rule]", "0"}], ",", " ", 
           RowBox[{"PlotStyle", "\[Rule]", "None"}], ",", " ", 
           RowBox[{"Filling", "\[Rule]", 
            RowBox[{"{", 
             RowBox[{"1", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"{", "2", "}"}], ",", 
                RowBox[{"Directive", "[", 
                 RowBox[{"Gray", ",", 
                  RowBox[{"Opacity", "[", "0.3", "]"}]}], "]"}]}], "}"}]}], 
             "}"}]}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"RescaledHistogramWithErrorLogAndLinear", "[", 
    RowBox[{
    "data_", ",", " ", "xsecmultiplier_", ",", "binspec_", ",", 
     "options___"}], "]"}], ":=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"RescaledHistogramWithError", "[", 
        RowBox[{
        "data", ",", " ", "xsecmultiplier", ",", "binspec", ",", "options"}], 
        "]"}], ",", " ", 
       RowBox[{"RescaledLogHistogramWithError", "[", 
        RowBox[{
        "data", ",", " ", "xsecmultiplier", ",", "binspec", ",", "options"}], 
        "]"}]}], "}"}], "}"}], "//", "TableForm"}]}], ";"}]}], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["2D heatmaps", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Make2DHistogramsNoStatCheck", "[", 
     RowBox[{
     "data_", ",", "histrange1_", ",", "histrange2_", ",", " ", "dataname_", 
      ",", " ", 
      RowBox[{"{", 
       RowBox[{"xname_", ",", "yname_"}], "}"}]}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "binstartpoints1", ",", "binstartpoints2", ",", " ", "datalist", ",", 
        " ", "numdatapointslist", ",", " ", "output"}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "binstartpoints1", ",", "binstartpoints2", ",", " ", "datalist", ",",
           " ", "numdatapointslist"}], "}"}], "=", 
        RowBox[{"WeightedHistogramList", "[", 
         RowBox[{"data", ",", "histrange1", ",", "histrange2"}], "]"}]}], ";",
        "\[IndentingNewLine]", 
       RowBox[{"plotlistSAVE", " ", "=", " ", 
        RowBox[{"Flatten", "[", 
         RowBox[{
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{
               RowBox[{"binstartpoints1", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "+", 
               FractionBox[
                RowBox[{"histrange1", "[", 
                 RowBox[{"[", "3", "]"}], "]"}], "2"]}], ",", 
              RowBox[{
               RowBox[{"binstartpoints2", "[", 
                RowBox[{"[", "j", "]"}], "]"}], "+", 
               FractionBox[
                RowBox[{"histrange2", "[", 
                 RowBox[{"[", "3", "]"}], "]"}], "2"]}], ",", 
              RowBox[{
               RowBox[{"datalist", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "j", "]"}], "]"}]}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"i", ",", "1", ",", 
              RowBox[{
               RowBox[{"Dimensions", "[", "datalist", "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"j", ",", "1", ",", 
              RowBox[{
               RowBox[{"Dimensions", "[", "datalist", "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}], ",", "1"}], 
         "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"output", " ", "=", 
        RowBox[{
         RowBox[{"ListDensityPlot", "[", "\[IndentingNewLine]", 
          RowBox[{"plotlistSAVE", ",", "\[IndentingNewLine]", 
           RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
           RowBox[{"FrameLabel", "\[Rule]", 
            RowBox[{"{", 
             RowBox[{"xname", ",", " ", "yname"}], "}"}]}], ",", " ", 
           RowBox[{"ImageSize", "\[Rule]", "500"}], ",", " ", 
           RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
           RowBox[{"ColorFunction", "\[Rule]", "\"\<SolarColors\>\""}], ",", 
           " ", 
           RowBox[{"BaseStyle", "\[Rule]", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"FontWeight", "\[Rule]", "Normal"}], ",", 
              RowBox[{"FontSize", "\[Rule]", "15"}]}], "}"}]}], ",", " ", 
           RowBox[{"PlotLabel", "\[Rule]", "dataname"}], ",", " ", 
           RowBox[{"InterpolationOrder", "\[Rule]", "0"}]}], "]"}], "//", 
         "TableForm"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"ClearMemory", "[", "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "output"}]}], "\[IndentingNewLine]", "]"}]}], 
   ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Make2DHistograms", "[", 
    RowBox[{
    "data_", ",", "histrange1_", ",", "histrange2_", ",", " ", "dataname_", 
     ",", " ", 
     RowBox[{"{", 
      RowBox[{"xname_", ",", "yname_"}], "}"}]}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "binstartpoints1", ",", "binstartpoints2", ",", " ", "datalist", ",", 
       " ", "numdatapointslist", ",", " ", "output"}], "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "binstartpoints1", ",", "binstartpoints2", ",", " ", "datalist", ",", 
         " ", "numdatapointslist"}], "}"}], "=", 
       RowBox[{"WeightedHistogramList", "[", 
        RowBox[{"data", ",", "histrange1", ",", "histrange2"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"plotlistSAVE", " ", "=", " ", 
       RowBox[{"Flatten", "[", 
        RowBox[{
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"binstartpoints1", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "+", 
              FractionBox[
               RowBox[{"histrange1", "[", 
                RowBox[{"[", "3", "]"}], "]"}], "2"]}], ",", 
             RowBox[{
              RowBox[{"binstartpoints2", "[", 
               RowBox[{"[", "j", "]"}], "]"}], "+", 
              FractionBox[
               RowBox[{"histrange2", "[", 
                RowBox[{"[", "3", "]"}], "]"}], "2"]}], ",", 
             RowBox[{
              RowBox[{"datalist", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "j", "]"}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", "1", ",", 
             RowBox[{
              RowBox[{"Dimensions", "[", "datalist", "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"j", ",", "1", ",", 
             RowBox[{
              RowBox[{"Dimensions", "[", "datalist", "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}], ",", "1"}], 
        "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"plotliststatSAVE", " ", "=", " ", 
       RowBox[{"Flatten", "[", 
        RowBox[{
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"binstartpoints1", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "+", 
              FractionBox[
               RowBox[{"histrange1", "[", 
                RowBox[{"[", "3", "]"}], "]"}], "2"]}], ",", 
             RowBox[{
              RowBox[{"binstartpoints2", "[", 
               RowBox[{"[", "j", "]"}], "]"}], "+", 
              FractionBox[
               RowBox[{"histrange2", "[", 
                RowBox[{"[", "3", "]"}], "]"}], "2"]}], ",", 
             RowBox[{
              RowBox[{"numdatapointslist", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "j", "]"}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", "1", ",", 
             RowBox[{
              RowBox[{"Dimensions", "[", "datalist", "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"j", ",", "1", ",", 
             RowBox[{
              RowBox[{"Dimensions", "[", "datalist", "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}], ",", "1"}], 
        "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"output", " ", "=", " ", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"ListDensityPlot", "[", "\[IndentingNewLine]", 
            RowBox[{"plotlistSAVE", ",", "\[IndentingNewLine]", 
             RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
             RowBox[{"FrameLabel", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{"xname", ",", " ", "yname"}], "}"}]}], ",", " ", 
             RowBox[{"ImageSize", "\[Rule]", "500"}], ",", " ", 
             RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
             RowBox[{"ColorFunction", "\[Rule]", "\"\<SolarColors\>\""}], ",",
              " ", 
             RowBox[{"BaseStyle", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"FontWeight", "\[Rule]", "Normal"}], ",", 
                RowBox[{"FontSize", "\[Rule]", "15"}]}], "}"}]}], ",", " ", 
             RowBox[{"PlotLabel", "\[Rule]", "dataname"}], ",", " ", 
             RowBox[{"InterpolationOrder", "\[Rule]", "0"}]}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"ListDensityPlot", "[", "\[IndentingNewLine]", 
            RowBox[{"plotliststatSAVE", ",", "\[IndentingNewLine]", 
             RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
             RowBox[{"FrameLabel", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{"xname", ",", " ", "yname"}], "}"}]}], ",", " ", 
             RowBox[{"ImageSize", "\[Rule]", "500"}], ",", " ", 
             RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
             RowBox[{"ColorFunction", "\[Rule]", "\"\<SolarColors\>\""}], ",",
              " ", 
             RowBox[{"BaseStyle", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"FontWeight", "\[Rule]", "Normal"}], ",", 
                RowBox[{"FontSize", "\[Rule]", "15"}]}], "}"}]}], ",", " ", 
             RowBox[{
             "PlotLabel", "\[Rule]", 
              "\"\<statistics check [ignoring weight]\>\""}], ",", " ", 
             RowBox[{"InterpolationOrder", "\[Rule]", "0"}]}], "]"}]}], "}"}],
          "}"}], "//", "TableForm"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"ClearMemory", "[", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "output"}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]}], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"input", ":", " ", 
    RowBox[{"a", " ", "list", " ", "of", " ", "entries", " ", "like", " ", 
     RowBox[{"(", 
      RowBox[{"weight", ",", " ", 
       RowBox[{"{", 
        RowBox[{"data1", ",", " ", "data2"}], "}"}]}], ")"}]}]}], "*)"}], 
  "\n", 
  RowBox[{"(*", 
   RowBox[{"output", ":"}], " ", "*)"}], "\n", 
  RowBox[{
   RowBox[{"WeightedHistogramList", "[", 
    RowBox[{"data_", ",", " ", 
     RowBox[{"{", 
      RowBox[{
      "startrange1_", ",", " ", "endrange1_", ",", " ", "binwidth1_"}], "}"}],
      ",", " ", 
     RowBox[{"{", 
      RowBox[{
      "startrange2_", ",", " ", "endrange2_", ",", " ", "binwidth2_"}], 
      "}"}]}], "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "binstartpoints1", ",", " ", "binstartpoints2", ",", " ", "datalist", 
       ",", " ", "numdatapointslist", ",", " ", "currentweight", ",", " ", 
       "currentdata", ",", " ", "bin1", ",", " ", "bin2"}], "}"}], ",", "\n", 
     "  ", "\n", "  ", 
     RowBox[{
      RowBox[{"binstartpoints1", " ", "=", " ", 
       RowBox[{"Drop", "[", 
        RowBox[{
         RowBox[{"Table", "[", 
          RowBox[{"i", ",", " ", 
           RowBox[{"{", 
            RowBox[{
            "i", ",", " ", "startrange1", ",", " ", "endrange1", ",", " ", 
             "binwidth1"}], "}"}]}], "]"}], ",", " ", 
         RowBox[{"-", "1"}]}], "]"}]}], ";", "\n", "  ", 
      RowBox[{"binstartpoints2", " ", "=", " ", 
       RowBox[{"Drop", "[", 
        RowBox[{
         RowBox[{"Table", "[", 
          RowBox[{"i", ",", " ", 
           RowBox[{"{", 
            RowBox[{
            "i", ",", " ", "startrange2", ",", " ", "endrange2", ",", " ", 
             "binwidth2"}], "}"}]}], "]"}], ",", " ", 
         RowBox[{"-", "1"}]}], "]"}]}], ";", "\n", "  ", 
      RowBox[{"datalist", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"0", ",", " ", 
         RowBox[{"{", 
          RowBox[{"Length", "[", "binstartpoints1", "]"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{"Length", "[", "binstartpoints2", "]"}], "}"}]}], "]"}]}], 
      ";", " ", 
      RowBox[{"(*", 
       RowBox[{
       "this", " ", "will", " ", "be", " ", "the", " ", "data", " ", "to", 
        " ", "make", " ", "the", " ", "weighted", " ", "histogram"}], "*)"}], 
      "\n", "  ", 
      RowBox[{"numdatapointslist", " ", "=", " ", "datalist"}], ";", " ", 
      RowBox[{"(*", 
       RowBox[{
       "this", " ", "contains", " ", "the", " ", "number", " ", "of", " ", 
        "weighted", " ", "datapoints", " ", "that", " ", "went", " ", "into", 
        " ", "each", " ", "bin"}], "*)"}], "\n", "  ", "\n", "  ", 
      RowBox[{"Monitor", "[", "\n", "   ", 
       RowBox[{
        RowBox[{
         RowBox[{"Do", "[", "\n", "     ", 
          RowBox[{
           RowBox[{
            RowBox[{"currentweight", " ", "=", " ", 
             RowBox[{
              RowBox[{"data", "[", 
               RowBox[{"[", "dataindex", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ";", "\n", "     ", 
            RowBox[{"currentdata", " ", "=", " ", 
             RowBox[{
              RowBox[{"data", "[", 
               RowBox[{"[", "dataindex", "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], ";", "\n", "     ", "\n", 
            "     ", 
            RowBox[{"bin1", " ", "=", " ", 
             RowBox[{"-", "1"}]}], ";", "\n", "     ", 
            RowBox[{"bin2", " ", "=", " ", 
             RowBox[{"-", "1"}]}], ";", "\n", "     ", "\n", "     ", 
            RowBox[{
             RowBox[{"Do", "[", "\n", "       ", 
              RowBox[{
               RowBox[{
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"IsInRange", "[", 
                   RowBox[{
                    RowBox[{"currentdata", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                    RowBox[{
                    RowBox[{"binstartpoints1", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], " ", "+", " ", 
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "binwidth1"}], "}"}]}]}], "]"}], 
                  ",", "\n", "         ", 
                  RowBox[{
                   RowBox[{"bin1", " ", "=", " ", "i"}], ";", "\n", 
                   "         ", 
                   RowBox[{"i", " ", "=", " ", 
                    RowBox[{
                    RowBox[{"Length", "[", "binstartpoints1", "]"}], " ", "+",
                     " ", "10"}]}], ";"}]}], " ", 
                 RowBox[{"(*", 
                  RowBox[{"exit", " ", "loop"}], "*)"}], "\n", "         ", 
                 "]"}], ";"}], "\n", "       ", ",", "\n", "       ", 
               RowBox[{"{", 
                RowBox[{"i", ",", " ", "1", ",", " ", 
                 RowBox[{"Length", "[", "binstartpoints1", "]"}]}], "}"}]}], 
              "]"}], "\n", "      ", "\n", "      ", 
             RowBox[{"Do", "[", "\n", "       ", 
              RowBox[{
               RowBox[{
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"IsInRange", "[", 
                   RowBox[{
                    RowBox[{"currentdata", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
                    RowBox[{
                    RowBox[{"binstartpoints2", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], " ", "+", " ", 
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "binwidth2"}], "}"}]}]}], "]"}], 
                  ",", "\n", "         ", 
                  RowBox[{
                   RowBox[{"bin2", " ", "=", " ", "i"}], ";", "\n", 
                   "         ", 
                   RowBox[{"i", " ", "=", " ", 
                    RowBox[{
                    RowBox[{"Length", "[", "binstartpoints2", "]"}], " ", "+",
                     " ", "10"}]}], ";"}]}], " ", 
                 RowBox[{"(*", 
                  RowBox[{"exit", " ", "loop"}], "*)"}], "\n", "         ", 
                 "]"}], ";"}], "\n", "       ", ",", "\n", "       ", 
               RowBox[{"{", 
                RowBox[{"i", ",", " ", "1", ",", " ", 
                 RowBox[{"Length", "[", "binstartpoints2", "]"}]}], "}"}]}], 
              "]"}]}], ";", "\n", "     ", "\n", "     ", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"bin1", " ", ">", " ", "0"}], " ", "&&", " ", 
               RowBox[{"bin2", " ", ">", " ", "0"}]}], ",", "\n", "      ", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"datalist", "[", 
                  RowBox[{"[", "bin1", "]"}], "]"}], "[", 
                 RowBox[{"[", "bin2", "]"}], "]"}], " ", "=", " ", 
                RowBox[{
                 RowBox[{
                  RowBox[{"datalist", "[", 
                   RowBox[{"[", "bin1", "]"}], "]"}], "[", 
                  RowBox[{"[", "bin2", "]"}], "]"}], " ", "+", " ", 
                 "currentweight"}]}], ";", "\n", "      ", 
               RowBox[{
                RowBox[{
                 RowBox[{"numdatapointslist", "[", 
                  RowBox[{"[", "bin1", "]"}], "]"}], "[", 
                 RowBox[{"[", "bin2", "]"}], "]"}], "++"}], ";"}]}], "\n", 
             "      ", "]"}], ";"}], "\n", "     ", "\n", "     ", "\n", 
           "     ", "\n", "     ", ",", " ", 
           RowBox[{"{", 
            RowBox[{"dataindex", ",", " ", "1", ",", " ", 
             RowBox[{"Length", "[", "data", "]"}]}], "}"}]}], "]"}], ";"}], 
        "\n", "   ", ",", " ", "dataindex"}], "]"}], ";", "\n", "  ", "\n", 
      "  ", "ClearMemory", ";", "\n", "  ", "\n", "  ", 
      RowBox[{"{", 
       RowBox[{
       "binstartpoints1", ",", " ", "binstartpoints2", ",", " ", "datalist", 
        ",", " ", "numdatapointslist"}], "}"}]}]}], "\n", "  ", "\n", "  ", 
    "\n", "  ", "]"}]}]}]], "Input"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Accessing basic kinematic properties of an event entry (i.e. a PARTICLE)\
\>", "Subtitle"],

Cell["\<\
Note
etaOf has been updated to be PSEUDORAPIDITY, and rapOf is now the real \
rapidity (previously called etaOf)\
\>", "Text"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "those", " ", "are", " ", "input", " ", "or", " ", "decayed", " ", 
    "particles"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"decayedOrIn", " ", "=", " ", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"_", ",", 
        RowBox[{"-", "1"}], ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", 
        ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_"}], "}"}], 
      "  ", "|", " ", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "2", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", 
        "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_"}], "}"}]}]}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EventOut", "[", " ", "event_", " ", "]"}], "  ", ":=", " ", 
     RowBox[{"(", 
      RowBox[{"DeleteCases", "[", 
       RowBox[{"event", ",", "decayedOrIn"}], "]"}], ")"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"SetOut", "[", " ", "event_", " ", "]"}], "  ", ":=", " ", 
     RowBox[{"(", 
      RowBox[{"DeleteCases", "[", 
       RowBox[{"event", ",", "decayedOrIn", ",", "2"}], "]"}], ")"}]}], ";"}],
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"EffMassAll", "[", "objList_", "]"}], "  ", ":=", 
      RowBox[{"Plus", " ", "@@", " ", 
       RowBox[{"Map", "[", 
        RowBox[{"ptOf", ",", 
         RowBox[{"objList", "//", "Transpose"}], ",", 
         RowBox[{"{", "2", "}"}]}], "]"}]}]}], ";"}], " ", "*)"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"EffMass", "[", "event_", "]"}], "  ", ":=", 
     RowBox[{"Plus", " ", "@@", " ", 
      RowBox[{"Map", "[", 
       RowBox[{"ptOf", ",", "event", ",", 
        RowBox[{"{", "1", "}"}]}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"pT", "[", "event_", "]"}], "  ", ":=", 
     RowBox[{
      RowBox[{"Map", "[", 
       RowBox[{"ptOf", ",", "event", ",", 
        RowBox[{"{", "1", "}"}]}], "]"}], "//", "Flatten"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"eta", "[", "event_", "]"}], " ", ":=", " ", 
     RowBox[{
      RowBox[{"Map", "[", 
       RowBox[{"etaOf", ",", "event", ",", 
        RowBox[{"{", "1", "}"}]}], "]"}], "//", "Flatten"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"theta", "[", "event_", "]"}], " ", ":=", " ", 
     RowBox[{
      RowBox[{"Map", "[", 
       RowBox[{"thetaOf", ",", "event", ",", 
        RowBox[{"{", "1", "}"}]}], "]"}], "//", "Flatten"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"threeVector", "[", "event_", "]"}], " ", ":=", " ", 
     RowBox[{"Map", "[", 
      RowBox[{"ThreeVectorFrom", ",", "event", ",", 
       RowBox[{"{", "1", "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"MissingEnergy", "[", "event_", "]"}], " ", ":=", " ", 
     RowBox[{"Plus", " ", "@@", " ", 
      RowBox[{"Map", "[", 
       RowBox[{"enOf", ",", "event", ",", 
        RowBox[{"{", "1", "}"}]}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"ptOf", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "___"}], "}"}], "]"}], ":=", 
     SqrtBox[
      RowBox[{
       RowBox[{"px", "^", "2"}], "+", 
       RowBox[{"py", "^", "2"}]}]]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"ptVec", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "___"}], "}"}], "]"}], ":=", 
     RowBox[{"{", 
      RowBox[{"px", ",", "py"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"enOf", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", 
        "_", ",", "_", ",", "En_", ",", "___"}], "}"}], "]"}], ":=", "En"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"thetaOf", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "pz_", ",", "___"}], "}"}], "]"}], ":=", " ", 
     RowBox[{"ArcCos", "[", 
      RowBox[{"pz", "/", 
       SqrtBox[
        RowBox[{
         RowBox[{"px", "^", "2"}], " ", "+", " ", 
         RowBox[{"py", "^", "2"}], "+", " ", 
         RowBox[{"pz", "^", "2"}]}]]}], "]"}]}], ";"}], "\[IndentingNewLine]",
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "we", " ", "want", " ", "to", " ", "follow", " ", "fastjet", " ", 
     "convention", " ", "and", " ", "return", " ", "phi", " ", "in", " ", 
     "the", " ", "range", " ", 
     RowBox[{"(", 
      RowBox[{"0", ",", " ", 
       RowBox[{"2", "\[Pi]"}]}], ")"}]}], " ", "*)"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"phifn", "[", 
     RowBox[{"px_", ",", "py_"}], "]"}], ":=", 
    RowBox[{"Which", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"px", " ", ">", " ", "0"}], " ", "&&", " ", 
       RowBox[{"py", " ", ">", " ", "0"}]}], ",", " ", "\[IndentingNewLine]", 
      RowBox[{"ArcTan", "[", 
       RowBox[{"py", "/", "px"}], "]"}], "\[IndentingNewLine]", ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"px", " ", "<", " ", "0"}], " ", "&&", " ", 
       RowBox[{"py", " ", ">", " ", "0"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"ArcTan", "[", 
        RowBox[{"py", "/", "px"}], "]"}], " ", "+", " ", "\[Pi]"}], 
      "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"px", " ", "<", " ", "0"}], " ", "&&", " ", 
       RowBox[{"py", " ", "<", " ", "0"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"\[Pi]", "+", " ", 
       RowBox[{"ArcTan", "[", 
        RowBox[{"py", "/", "px"}], "]"}]}], "\[IndentingNewLine]", ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"px", " ", ">", " ", "0"}], " ", "&&", " ", 
       RowBox[{"py", " ", "<", " ", "0"}]}], ",", " ", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"2", "\[Pi]"}], " ", "+", " ", 
       RowBox[{"ArcTan", "[", 
        RowBox[{"py", "/", "px"}], "]"}]}]}], "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"phiOf", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "pz_", ",", "___"}], "}"}], "]"}], ":=", " ", 
     RowBox[{"phifn", "[", 
      RowBox[{"px", ",", "py"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"AbsMin", "[", "list_", "]"}], ":=", 
     RowBox[{
      RowBox[{"Sort", "[", 
       RowBox[{"list", ",", 
        RowBox[{
         RowBox[{
          RowBox[{"Abs", "[", "#1", "]"}], "<", 
          RowBox[{"Abs", "[", "#2", "]"}]}], "&"}]}], "]"}], 
      "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"DeltaR", "[", 
       RowBox[{"part1_", ",", "part2_"}], "]"}], ":=", 
      RowBox[{"\[Sqrt]", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"etaOf", "[", "part1", "]"}], " ", "-", " ", 
            RowBox[{"etaOf", "[", "part2", "]"}]}], ")"}], "^", "2"}], " ", 
         "+", "\[IndentingNewLine]", " ", 
         RowBox[{"Min", "[", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"phiOf", "[", "part1", "]"}], "-", 
               RowBox[{"phiOf", "[", "part2", "]"}]}], ")"}], "^", "2"}], 
            "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"2", " ", "\[Pi]"}], " ", "-", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"phiOf", "[", "part1", "]"}], "-", 
                 RowBox[{"phiOf", "[", "part2", "]"}]}], ")"}]}], ")"}], "^", 
             "2"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"2", " ", "\[Pi]"}], " ", "+", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"phiOf", "[", "part1", "]"}], "-", 
                 RowBox[{"phiOf", "[", "part2", "]"}]}], ")"}]}], ")"}], "^", 
             "2"}]}], "\[IndentingNewLine]", "}"}], "]"}]}], ")"}]}]}], ";"}],
     "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"DeltaR", "[", 
      RowBox[{"part1_", ",", "part2_"}], "]"}], ":=", 
     RowBox[{"\[Sqrt]", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"etaOf", "[", "part1", "]"}], " ", "-", " ", 
           RowBox[{"etaOf", "[", "part2", "]"}]}], ")"}], "^", "2"}], " ", 
        "+", "\[IndentingNewLine]", " ", 
        RowBox[{
         RowBox[{"DeltaPhi", "[", 
          RowBox[{"part1", ",", "part2"}], "]"}], "^", "2"}]}], ")"}]}]}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"DeltaPhi", "[", 
      RowBox[{"part1_", ",", "part2_"}], "]"}], ":=", 
     RowBox[{"AbsMin", "[", 
      RowBox[{"{", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"phiOf", "[", "part1", "]"}], "-", 
          RowBox[{"phiOf", "[", "part2", "]"}]}], ")"}], 
        "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"2", " ", "\[Pi]"}], " ", "-", " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"phiOf", "[", "part1", "]"}], "-", 
            RowBox[{"phiOf", "[", "part2", "]"}]}], ")"}]}], ")"}], 
        "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"2", " ", "\[Pi]"}], " ", "+", " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"phiOf", "[", "part1", "]"}], "-", 
            RowBox[{"phiOf", "[", "part2", "]"}]}], ")"}]}], ")"}]}], 
       "\[IndentingNewLine]", "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"these", " ", "are", " ", 
       RowBox[{"wrong", "!"}], " ", "I", " ", 
       RowBox[{"don", "'"}], "t", " ", "know", " ", "where", " ", "the", " ", 
       "hell", " ", "they", " ", "came", " ", "from"}], "..."}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"etaOf", "[", 
       RowBox[{"{", 
        RowBox[{
        "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", 
         ",", "py_", ",", "pz_", ",", "___"}], "}"}], "]"}], ":=", 
      RowBox[{"-", " ", 
       RowBox[{"Log", "[", " ", 
        RowBox[{"Abs", "[", 
         RowBox[{"Tan", "[", " ", 
          RowBox[{
           RowBox[{"ArcCos", "[", 
            RowBox[{"pz", "/", 
             SqrtBox[
              RowBox[{
               RowBox[{"px", "^", "2"}], " ", "+", " ", 
               RowBox[{"py", "^", "2"}], "+", " ", 
               RowBox[{"pz", "^", "2"}]}]]}], "]"}], "/", "2"}], "]"}], "]"}],
         "]"}]}]}], ";", " ", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"etaOf", "[", 
       RowBox[{"{", 
        RowBox[{
        "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", 
         ",", "py_", ",", "pz_", ",", "___"}], "}"}], "]"}], ":=", " ", 
      RowBox[{"ArcSinh", "[", 
       RowBox[{"pz", "/", 
        SqrtBox[
         RowBox[{
          RowBox[{"px", "^", "2"}], " ", "+", " ", 
          RowBox[{"py", "^", "2"}]}]]}], "]"}]}], ";"}], 
    "\[IndentingNewLine]", "\[IndentingNewLine]", "*)"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"this", " ", "is", " ", "actual", " ", 
     RowBox[{"rapidity", "!!"}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"rapOf", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "pz_", ",", "e_", ",", "___"}], "}"}], "]"}], ":=", 
     RowBox[{
      FractionBox["1", "2"], 
      RowBox[{"Log", "[", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"e", "+", "pz"}], ")"}], "/", 
        RowBox[{"(", 
         RowBox[{"e", "-", "pz"}], ")"}]}], "]"}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"this", " ", "is", " ", "pseudorapidity"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"etaOf", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "pz_", ",", "e_", ",", "___"}], "}"}], "]"}], ":=", 
     RowBox[{"-", 
      RowBox[{"Log", "[", 
       RowBox[{"Tan", "[", 
        RowBox[{
         RowBox[{"ArcCos", "[", 
          RowBox[{"pz", "/", 
           SqrtBox[
            RowBox[{
             RowBox[{"px", "^", "2"}], " ", "+", " ", 
             RowBox[{"py", "^", "2"}], "+", " ", 
             RowBox[{"pz", "^", "2"}]}]]}], "]"}], "/", "2"}], "]"}], 
       "]"}]}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"FourVectorFrom", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "pz_", ",", "En_", ",", "___"}], "}"}], "]"}], " ", ":=",
      " ", 
     RowBox[{"{", 
      RowBox[{"En", ",", " ", "px", ",", " ", "py", ",", "pz"}], " ", "}"}]}],
     ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{
      RowBox[{"FourLength", "[", 
       RowBox[{"{", 
        RowBox[{"pe_", ",", "pz_", ",", "px_", ",", "py_"}], "}"}], "]"}], 
      " ", ":=", " ", 
      RowBox[{"Sqrt", "[", 
       RowBox[{"Max", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"pe", "^", "2"}], " ", "-", " ", 
          RowBox[{"pz", "^", "2"}], " ", "-", " ", 
          RowBox[{"px", "^", "2"}], " ", "-", " ", 
          RowBox[{"py", "^", "2"}]}], ",", "0.0"}], "]"}], "]"}]}], ";"}], 
    "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"FourLength", "[", 
      RowBox[{"{", 
       RowBox[{"pe_", ",", "pz_", ",", "px_", ",", "py_"}], "}"}], "]"}], " ",
      ":=", " ", 
     RowBox[{"Sqrt", "[", 
      RowBox[{
       RowBox[{"pe", "^", "2"}], " ", "-", " ", 
       RowBox[{"pz", "^", "2"}], " ", "-", " ", 
       RowBox[{"px", "^", "2"}], " ", "-", " ", 
       RowBox[{"py", "^", "2"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"FourLengthSq", "[", 
      RowBox[{"{", 
       RowBox[{"pe_", ",", "pz_", ",", "px_", ",", "py_"}], "}"}], "]"}], " ",
      ":=", " ", 
     RowBox[{
      RowBox[{"pe", "^", "2"}], " ", "-", " ", 
      RowBox[{"pz", "^", "2"}], " ", "-", " ", 
      RowBox[{"px", "^", "2"}], " ", "-", " ", 
      RowBox[{"py", "^", "2"}]}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"ThreeVectorFrom", "[", 
      RowBox[{"{", 
       RowBox[{
       "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "px_", ",",
         "py_", ",", "pz_", ",", "___"}], "}"}], "]"}], " ", ":=", " ", 
     RowBox[{"{", " ", 
      RowBox[{"px", ",", " ", "py", ",", "pz"}], " ", "}"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"CosthetaTwoJet", "[", 
      RowBox[{"{", 
       RowBox[{"jet1_", ",", "jet2_"}], "}"}], "]"}], " ", ":=", " ", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"a", ",", "b"}], "}"}], ",", 
       RowBox[{
        RowBox[{"a", " ", "=", " ", 
         RowBox[{"ThreeVectorFrom", "[", "jet1", "]"}]}], ";", " ", 
        RowBox[{"b", "=", "  ", 
         RowBox[{"ThreeVectorFrom", "[", "jet2", "]"}]}], ";", " ", 
        RowBox[{
         RowBox[{"a", ".", "b"}], "/", 
         SqrtBox[
          RowBox[{
           RowBox[{"a", ".", "a"}], " ", 
           RowBox[{"b", ".", "b"}]}]]}]}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"GetAll", "[", "evt_", "]"}], ":=", "evt"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"all", "[", "evt_", "]"}], ":=", "True"}], ";"}], 
   "\[IndentingNewLine]", "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"Freq", "[", 
      RowBox[{"evtList_", ",", "crit_", ",", "objsel_", ",", "plotfunc_", ",", 
       RowBox[{"{", 
        RowBox[{"min_", ",", "max_", ",", "nbins_"}], "}"}]}], "]"}], ":=", 
     RowBox[{"BinCounts", "[", " ", 
      RowBox[{
       RowBox[{"Flatten", "[", " ", 
        RowBox[{"plotfunc", "/@", 
         RowBox[{"Flatten4", "[", 
          RowBox[{"objsel", "/@", 
           RowBox[{"Select", "[", 
            RowBox[{"evtList", ",", "crit"}], "]"}]}], "]"}]}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"min", ",", "max", ",", 
         FractionBox[
          RowBox[{"max", "-", "min"}], "nbins"]}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"Flatten4", "[", "List_", "]"}], ":=", 
     RowBox[{"Flatten", "[", 
      RowBox[{"List", ",", 
       RowBox[{"Max", "[", 
        RowBox[{"0", ",", 
         RowBox[{
          RowBox[{"Depth", "[", "List", "]"}], "-", "4"}]}], "]"}]}], "]"}]}],
     ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"HGet", "[", 
       RowBox[{"patt_", ",", "All"}], "]"}], "[", "evt_", "]"}], ":=", 
     RowBox[{"Cases", "[", 
      RowBox[{"evt", ",", "patt"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"oJetlhe", "=", "  ", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "2", ",", "1", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", 
        "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_"}], "}"}], "  ", 
      "|", " ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"-", "2"}], ",", "1", ",", "_", ",", "_", ",", "_", ",", "_", 
        ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", 
        "_"}], "}"}], "|", 
      RowBox[{"{", 
       RowBox[{
       "21", ",", "1", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", 
        "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_"}], "}"}]}]}], 
    "  ", ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"oMissingEnergy", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{
      "8888", ",", "1", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_", ",",
        "_", ",", "_", ",", "_", ",", "_", ",", "_", ",", "_"}], "}"}]}], 
    "  ", ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"PTSort", "[", "event_", "]"}], ":=", 
     RowBox[{"Sort", "[", 
      RowBox[{"event", ",", 
       RowBox[{
        RowBox[{"Greater", "[", 
         RowBox[{
          RowBox[{"ptOf", "[", "#1", "]"}], ",", 
          RowBox[{"ptOf", "[", "#2", "]"}]}], "]"}], "&"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", "\n", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"and", "[", "f_", "]"}], "[", "evt_", "]"}], ":=", 
     RowBox[{"f", "[", "evt", "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"and", "[", 
       RowBox[{"f_", ",", "g__"}], "]"}], "[", "evt_", "]"}], ":=", 
     RowBox[{
      RowBox[{"f", "[", "evt", "]"}], "&&", 
      RowBox[{
       RowBox[{"and", "[", "g", "]"}], "[", "evt", "]"}]}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"or", "[", "f_", "]"}], "[", "evt_", "]"}], ":=", 
     RowBox[{"f", "[", "evt", "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"or", "[", 
       RowBox[{"f_", ",", "g__"}], "]"}], "[", "evt_", "]"}], ":=", 
     RowBox[{
      RowBox[{"f", "[", "evt", "]"}], "||", 
      RowBox[{
       RowBox[{"or", "[", "g", "]"}], "[", "evt", "]"}]}]}], ";"}], "\n", 
   "\n", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"join", "[", "f_", "]"}], "[", "evt_", "]"}], ":=", 
     RowBox[{"f", "[", "evt", "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"join", "[", 
       RowBox[{"f_", ",", "g__"}], "]"}], "[", "evt_", "]"}], ":=", 
     RowBox[{"Join", "[", 
      RowBox[{
       RowBox[{"f", "[", "evt", "]"}], ",", 
       RowBox[{"join", "[", 
        RowBox[{"g", "[", "evt", "]"}], "]"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]"}]}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["More useful kinematic functions & observables", "Subtitle"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Wmass", " ", "=", " ", "80.4"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"tmass", " ", "=", " ", "174.3"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Zmass", " ", "=", " ", "91.2"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MGMEwmass", " ", "=", " ", "79.82"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"MGMEtmass", " ", "=", " ", "175"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"FourDotProduct", "[", 
     RowBox[{"v_", ",", "u_"}], "]"}], ":=", 
    RowBox[{
     RowBox[{
      RowBox[{"v", "[", 
       RowBox[{"[", "1", "]"}], "]"}], " ", 
      RowBox[{"u", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], " ", "-", " ", 
     RowBox[{
      RowBox[{"v", "[", 
       RowBox[{"[", 
        RowBox[{"2", ";;", "4"}], "]"}], "]"}], ".", 
      RowBox[{"u", "[", 
       RowBox[{"[", 
        RowBox[{"2", ";;", "4"}], "]"}], "]"}]}]}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "finds", " ", "the", " ", "smallest", " ", "entry", " ", "of", " ", "a", 
    " ", "list", " ", "of", " ", "real", " ", "numbers", " ", "and", " ", 
    "returns", " ", 
    RowBox[{"{", 
     RowBox[{"min", ",", " ", 
      RowBox[{"positin", " ", "of", " ", "min", " ", "in", " ", "list"}]}], 
     "}"}]}], "\[IndentingNewLine]", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"FindMin", "[", "list_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"currentmin", ",", " ", "currentminPosn", ",", " ", "i"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"currentmin", " ", "=", " ", "Infinity"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"currentminPosn", " ", "=", " ", "0"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
         RowBox[{"i", "\[LessEqual]", 
          RowBox[{"Length", "[", "list", "]"}]}], ",", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"list", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "<", "currentmin"}], ",", " ", 
            RowBox[{
             RowBox[{"currentminPosn", " ", "=", " ", "i"}], ";", " ", 
             RowBox[{"currentmin", " ", "=", " ", 
              RowBox[{"list", "[", 
               RowBox[{"[", "i", "]"}], "]"}]}]}]}], "]"}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"currentmin", ",", " ", "currentminPosn"}], "}"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"if", " ", "anything", " ", "in", " ", "number"}], ",", " ", 
    RowBox[{"range", " ", "is", " ", "imaginary"}], ",", " ", 
    RowBox[{"return", " ", 
     RowBox[{"FALSE", "!"}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"IsInRange", "[", 
     RowBox[{"number_", ",", "range_"}], "]"}], ":=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"number", " ", 
        RowBox[{"range", "[", 
         RowBox[{"[", "1", "]"}], "]"}], " ", 
        RowBox[{"range", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], "  ", "\[Element]", " ", "Reals"}],
       ",", " ", 
      RowBox[{"TrueQ", "[", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"number", " ", "\[GreaterEqual]", " ", 
          RowBox[{"range", "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], ")"}], "&&", 
        RowBox[{"(", 
         RowBox[{"number", " ", "\[LessEqual]", 
          RowBox[{"range", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], ")"}]}], "]"}], ",", " ", 
      "False", ",", " ", "False"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"InvMassSq", "[", 
     RowBox[{"event_", ",", "particleList_"}], "]"}], ":=", " ", 
    RowBox[{
     RowBox[{"FourLength", "[", " ", 
      RowBox[{"Sum", "[", 
       RowBox[{
        RowBox[{"FourVectorFrom", "[", 
         RowBox[{"event", "[", 
          RowBox[{"[", 
           RowBox[{"particleList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "]"}], "]"}], "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "[", "particleList", "]"}]}], "}"}]}], "]"}], 
      "]"}], "^", "2"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "invariant", " ", "mass", " ", "with", " ", "jet", " ", "rescaling"}], 
    ",", " ", 
    RowBox[{"used", " ", 
     RowBox[{"e", ".", "g", ".", " ", "in"}], " ", "top", " ", 
     "reconstruction"}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"InvMassScaled", "[", 
     RowBox[{"event_", ",", "particleList_", ",", "scalelist_"}], "]"}], ":=",
     " ", 
    RowBox[{"FourLength", "[", " ", 
     RowBox[{"Sum", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"scalelist", "[", 
         RowBox[{"[", "i", "]"}], "]"}], 
        RowBox[{"FourVectorFrom", "[", 
         RowBox[{"event", "[", 
          RowBox[{"[", 
           RowBox[{"particleList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "]"}], "]"}], "]"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "1", ",", 
         RowBox[{"Length", "[", "particleList", "]"}]}], "}"}]}], "]"}], 
     "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"InvMass", "[", 
     RowBox[{"event_", ",", "particleList_"}], "]"}], ":=", " ", 
    RowBox[{"FourLength", "[", " ", 
     RowBox[{"Sum", "[", 
      RowBox[{
       RowBox[{"FourVectorFrom", "[", 
        RowBox[{"event", "[", 
         RowBox[{"[", 
          RowBox[{"particleList", "[", 
           RowBox[{"[", "i", "]"}], "]"}], "]"}], "]"}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "1", ",", 
         RowBox[{"Length", "[", "particleList", "]"}]}], "}"}]}], "]"}], 
     "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"InvMass", "[", "particles_", "]"}], ":=", " ", 
    RowBox[{"FourLength", "[", " ", 
     RowBox[{"Sum", "[", 
      RowBox[{
       RowBox[{"FourVectorFrom", "[", 
        RowBox[{"particles", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "1", ",", 
         RowBox[{"Length", "[", "particles", "]"}]}], "}"}]}], "]"}], "]"}]}],
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
     "creates", " ", "a", " ", "list", " ", "with", " ", "entries", " ", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "xi", ",", " ", 
         "\"\<number of events between xi -dx and xi + dx\>\""}], "}"}], " ", 
       "--"}], " ", "basically", " ", "a", " ", "histogram", " ", "in", " ", 
      "listplot", " ", "form"}], ",", " ", 
     RowBox[{
     "more", " ", "useful", " ", "for", " ", "some", " ", "applications"}]}], 
    "}"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"MyBinList", "[", 
     RowBox[{"list_", ",", " ", 
      RowBox[{"{", 
       RowBox[{"xmin_", ",", "xmax_", ",", " ", "dx_"}], "}"}]}], "]"}], ":=", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"xmin", " ", "-", " ", 
          RowBox[{"dx", "/", "2"}], " ", "+", " ", 
          RowBox[{"i", " ", "dx"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "1", ",", 
           RowBox[{"IntegerPart", "[", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"xmax", "-", "xmin"}], ")"}], "/", "dx"}], "]"}]}], 
          "}"}]}], "]"}], ",", 
       RowBox[{"BinCounts", "[", 
        RowBox[{"list", ",", " ", 
         RowBox[{"{", 
          RowBox[{"xmin", ",", " ", "xmax", ",", " ", "dx"}], "}"}]}], 
        "]"}]}], "}"}], "//", "Transpose"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "just", " ", "like", " ", "my", " ", "regular", " ", "MyBinList", " ", 
     "function"}], ",", " ", 
    RowBox[{
    "except", " ", "the", " ", "counts", " ", "are", " ", "renormalized", " ",
      "by", " ", "a", " ", "set", " ", "number"}]}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"MyRenormalizedBinList", "[", 
     RowBox[{"list_", ",", " ", 
      RowBox[{"{", 
       RowBox[{"xmin_", ",", "xmax_", ",", " ", "dx_"}], "}"}], ",", " ", 
      "norm_"}], "]"}], ":=", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"xmin", " ", "-", " ", 
          RowBox[{"dx", "/", "2"}], " ", "+", " ", 
          RowBox[{"i", " ", "dx"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "1", ",", 
           RowBox[{"IntegerPart", "[", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"xmax", "-", "xmin"}], ")"}], "/", "dx"}], "]"}]}], 
          "}"}]}], "]"}], ",", 
       RowBox[{"norm", " ", 
        RowBox[{"BinCounts", "[", 
         RowBox[{"list", ",", " ", 
          RowBox[{"{", 
           RowBox[{"xmin", ",", " ", "xmax", ",", " ", "dx"}], "}"}]}], 
         "]"}]}]}], "}"}], "//", "Transpose"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"that", " ", "way", " ", "I", " ", 
    RowBox[{"don", "'"}], "t", " ", "have", " ", "to", " ", "memorize", " ", 
    "where", " ", "in", " ", "each", " ", 
    RowBox[{"event", "[", 
     RowBox[{"[", "particle", "]"}], "]"}], " ", "entry", " ", "the", " ", 
    "various", " ", "variables", " ", "are"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "pidIndex", " ", ",", " ", "inoutIndex", ",", "mother1Index", " ", ",", 
      "mother2Index", ",", "color1Index", ",", " ", "color2Index", ",", " ", 
      "pxIndex", ",", " ", "pyIndex", ",", " ", "pzIndex", ",", " ", 
      "p0Index", ",", " ", "massIndex", ",", " ", "sixIndex", ",", " ", 
      "helIndex", ",", " ", "tagindex", ",", " ", "reconindex", ",", " ", 
      "combindex", ",", " ", "MCreconindex"}], "}"}], " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{
     "1", ",", "2", ",", "3", ",", "4", ",", "5", ",", "6", ",", "7", ",", 
      "8", ",", "9", ",", "10", ",", "11", ",", "12", ",", "13", ",", " ", 
      "14", ",", "15", ",", " ", "16", ",", " ", "17"}], "}"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "Feed", " ", "this", " ", "function", " ", "a", " ", "list", " ", "of", 
    " ", 
    RowBox[{"{", 
     RowBox[{"True", ",", "False", ",", "True", ",", "True", ",", "..."}], 
     "}"}], " ", "and", " ", 
    RowBox[{"it", "'"}], "ll", " ", "return", " ", "True", " ", "IFF", " ", 
    "all", " ", "entries", " ", "are", " ", "TRUE"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"AllTrue", "[", "booleanlist_", "]"}], ":=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Length", "[", 
        RowBox[{"Union", "[", "booleanlist", "]"}], "]"}], "\[Equal]", "1"}], 
      ",", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Union", "[", "booleanlist", "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}], ")"}], ",", "False"}], "]"}]}], ";"}],
   "\[IndentingNewLine]", "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"VectorLength", "[", "vec_", "]"}], ":=", 
    SqrtBox[
     RowBox[{"vec", ".", "vec"}]]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"finds", " ", "total", " ", "visible", " ", "pT", " ", 
     RowBox[{"(", "vector", ")"}], " ", "from", " ", "an", " ", "OUT"}], "-", 
    "event"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"TotalVisiblepT", "[", "event_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"visiblept", ",", " ", "currentparticle", ",", " ", "i"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"visiblept", " ", "=", " ", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0"}], "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
         RowBox[{"i", "\[LessEqual]", 
          RowBox[{"Length", "[", "event", "]"}]}], ",", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"currentparticle", " ", "=", " ", 
           RowBox[{"event", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"MemberQ", "[", 
              RowBox[{"invisiblelist", ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "pidIndex", "]"}], "]"}]}], "]"}]}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"visiblept", " ", "=", "  ", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"currentparticle", "[", 
                  RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                 RowBox[{"currentparticle", "[", 
                  RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}], " ", "+", 
               " ", "visiblept"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], 
          ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       "visiblept"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"finds", " ", "total", " ", "visible", " ", "pT", " ", 
     RowBox[{"(", "vector", ")"}], " ", "from", " ", "an", " ", "OUT"}], "-", 
    "event"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"TotalVisiblep", "[", "event_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"visiblept", ",", " ", "currentparticle", ",", " ", "i"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"visiblept", " ", "=", " ", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
         RowBox[{"i", "\[LessEqual]", 
          RowBox[{"Length", "[", "event", "]"}]}], ",", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"currentparticle", " ", "=", " ", 
           RowBox[{"event", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"MemberQ", "[", 
              RowBox[{"invisiblelist", ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "pidIndex", "]"}], "]"}]}], "]"}]}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"visiblept", " ", "=", "  ", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"currentparticle", "[", 
                  RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                 RowBox[{"currentparticle", "[", 
                  RowBox[{"[", "pyIndex", "]"}], "]"}], ",", 
                 RowBox[{"currentparticle", "[", 
                  RowBox[{"[", "pzIndex", "]"}], "]"}]}], "}"}], " ", "+", 
               " ", "visiblept"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], 
          ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       "visiblept"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"missingpT", "[", "event_", "]"}], ":=", 
   RowBox[{"-", 
    RowBox[{"TotalVisiblepT", "[", "event", "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"missingET", "[", "event_", "]"}], ":=", 
    RowBox[{"-", 
     RowBox[{"TotalVisiblepT", "[", "event", "]"}]}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"MET", "[", "event_", "]"}], " ", ":=", " ", 
    RowBox[{"missingET", "[", "event", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"HT", "[", "particles_", "]"}], ":=", 
    RowBox[{"Sum", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"particles", "[", 
        RowBox[{"[", "i", "]"}], "]"}], "//", "ptOf"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "particles", "]"}]}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "all", " ", "of", " ", "the", " ", "below", " ", "functions", " ", "with",
      " ", "names", " ", "like", " ", "xxxxJetpTxxx", " ", "take", " ", "an", 
     " ", "event", " ", "and", " ", "a", " ", "list", " ", "of", " ", "PIDs", 
     " ", "or", " ", "TAGs", " ", "and", " ", "return", " ", "either", " ", 
     "the", " ", "maximum", " ", "pT", " ", "of", " ", "those", " ", 
     "particles"}], ",", " ", 
    RowBox[{
    "or", " ", "a", " ", "list", " ", "of", " ", "all", " ", "pTs", " ", 
     RowBox[{"(", 
      RowBox[{"vector", " ", "lengths"}], ")"}], " ", "or", " ", "a", " ", 
     "list", " ", "of", " ", "pTs", " ", 
     RowBox[{"(", "vectors", ")"}]}]}], "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "this", " ", "function", " ", "reconstructs", " ", "neutrino", " ", 
    "transverse", " ", "momentum", " ", 
    RowBox[{"(", 
     RowBox[{"assuming", " ", 
      RowBox[{"there", "'"}], "s", " ", "only", " ", 
      RowBox[{"one", "!"}]}], ")"}], " ", "to", " ", "get", " ", "the", " ", 
    "total", " ", "transverse", " ", "mass", " ", "for", " ", "a", " ", 
    "given", " ", "event"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"assumes", " ", 
    FormBox[
     RowBox[{
      SuperscriptBox[
       SubscriptBox["M", "T"], "2"], " ", "=", " ", 
      RowBox[{
       RowBox[{
        SuperscriptBox[
         RowBox[{"(", 
          RowBox[{"\[Sum]", " ", 
           RowBox[{"|", 
            SubscriptBox["p", "T"], "|"}]}], ")"}], "2"], " ", "-", " ", 
        SuperscriptBox[
         RowBox[{"(", 
          RowBox[{"\[Sum]", " ", 
           SubscriptBox["p", "T"]}], ")"}], "2"]}], "  ", "=", "  ", 
       RowBox[{
        SuperscriptBox[
         RowBox[{"(", 
          RowBox[{"\[Sum]", " ", 
           SubscriptBox["E", "T"]}], ")"}], "2"], " ", "-", " ", 
        SuperscriptBox[
         RowBox[{"(", 
          RowBox[{"\[Sum]", " ", 
           SubscriptBox["p", "T"]}], ")"}], "2"], " ", " "}]}]}],
     TraditionalForm]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"TotalMT", "[", "event_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "visiblepts", ",", " ", "currentevent", ",", " ", "i", ",", " ", 
        "neutrinopt", ",", " ", "allpt", ",", "MT"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "collect", " ", "all", " ", "the", " ", "visible", " ", "pts"}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"visiblepts", " ", "=", 
        RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
         RowBox[{"i", "\[LessEqual]", 
          RowBox[{"Length", "[", "event", "]"}]}], ",", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"currentevent", " ", "=", " ", 
           RowBox[{"event", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"MemberQ", "[", 
              RowBox[{"invisiblelist", ",", " ", 
               RowBox[{"currentevent", "[", 
                RowBox[{"[", "pidIndex", "]"}], "]"}]}], "]"}]}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"visiblepts", " ", "=", " ", 
             RowBox[{"Append", "[", 
              RowBox[{"visiblepts", ",", "  ", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"currentevent", "[", 
                  RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                 RowBox[{"currentevent", "[", 
                  RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}]}], " ", 
              "]"}]}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"reconstruct", " ", "neutrino", " ", "pT"}], "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"neutrinopt", " ", "=", " ", 
        RowBox[{"-", 
         RowBox[{"Sum", "[", 
          RowBox[{
           RowBox[{"visiblepts", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", "1", ",", 
             RowBox[{"Length", "[", "visiblepts", "]"}]}], "}"}]}], "]"}]}]}],
        ";", "\[IndentingNewLine]", 
       RowBox[{"allpt", " ", "=", " ", 
        RowBox[{"Append", "[", 
         RowBox[{"visiblepts", ",", " ", "neutrinopt"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"MT", " ", "=", " ", 
        RowBox[{"\[Sqrt]", 
         RowBox[{"(", 
          RowBox[{
           SuperscriptBox[
            RowBox[{"Sum", "[", 
             RowBox[{
              RowBox[{"VectorLength", "[", 
               RowBox[{"allpt", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "1", ",", 
                RowBox[{"Length", "[", "allpt", "]"}]}], "}"}]}], "]"}], "2"],
            " ", "-", " ", 
           SuperscriptBox[
            RowBox[{"VectorLength", "[", 
             RowBox[{"Sum", "[", 
              RowBox[{
               RowBox[{"allpt", "[", 
                RowBox[{"[", "i", "]"}], "]"}], ",", 
               RowBox[{"{", 
                RowBox[{"i", ",", "1", ",", 
                 RowBox[{"Length", "[", "allpt", "]"}]}], "}"}]}], "]"}], 
             "]"}], "2"]}], ")"}]}]}], ";", "\[IndentingNewLine]", "MT"}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "takes", " ", "all", " ", "possible", " ", "jet", " ", "pairs", " ", 
    RowBox[{"(", 
     RowBox[{"by", " ", "PID"}], ")"}], " ", "and", " ", "gives", " ", "the", 
    " ", "minimum", " ", "DeltaR", " ", "jet", " ", "seperation"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"MinDeltaRJetsPID", "[", "event_", "]"}], ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"alljets", ",", "alljetpairs", ",", "\[CapitalDelta]Rlist"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"alljets", " ", "=", " ", 
        RowBox[{"FindParticles", "[", 
         RowBox[{"event", ",", " ", "jetlist"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"alljetpairs", " ", "=", " ", 
        RowBox[{"Subsets", "[", 
         RowBox[{"alljets", ",", 
          RowBox[{"{", "2", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"\[CapitalDelta]Rlist", " ", "=", " ", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"DeltaR", "[", 
           RowBox[{
            RowBox[{"event", "[", 
             RowBox[{"[", 
              RowBox[{
               RowBox[{"alljetpairs", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
            RowBox[{"event", "[", 
             RowBox[{"[", 
              RowBox[{
               RowBox[{"alljetpairs", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], "]"}], "]"}]}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "[", "alljetpairs", "]"}]}], "}"}]}], "]"}]}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"Min", "[", "\[CapitalDelta]Rlist", "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "takes", " ", "all", " ", "possible", " ", "jet", " ", "pairs", " ", 
    RowBox[{"(", 
     RowBox[{"by", " ", "TAG"}], ")"}], " ", "and", " ", "gives", " ", "the", 
    " ", "minimum", " ", "DeltaR", " ", "jet", " ", "seperation"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"MinDeltaRJetsTAG", "[", "event_", "]"}], ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"alljets", ",", "alljetpairs", ",", "\[CapitalDelta]Rlist"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"alljets", " ", "=", " ", 
       RowBox[{"FindTags", "[", 
        RowBox[{"event", ",", " ", 
         RowBox[{"{", 
          RowBox[{"btag", ",", " ", "jettag"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"alljetpairs", " ", "=", " ", 
       RowBox[{"Subsets", "[", 
        RowBox[{"alljets", ",", 
         RowBox[{"{", "2", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"\[CapitalDelta]Rlist", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"DeltaR", "[", 
          RowBox[{
           RowBox[{"event", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"alljetpairs", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
           RowBox[{"event", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"alljetpairs", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "1", ",", 
           RowBox[{"Length", "[", "alljetpairs", "]"}]}], "}"}]}], "]"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"Min", "[", "\[CapitalDelta]Rlist", "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Finding particle entries in an event ", "Subtitle"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "feed", " ", "this", " ", "function", " ", "an", " ", "event", " ", "and", 
    " ", "a", " ", "list", " ", "of", " ", "particle", " ", "IDs", " ", "and",
     " ", 
    RowBox[{"it", "'"}], "ll", " ", "output", " ", "a", " ", "list", " ", 
    "of", " ", "indices", " ", "indicating", " ", "which", " ", "particles", 
    " ", "in", " ", "the", " ", "event", " ", "are", " ", "of", " ", "that", 
    " ", "type"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"FindParticles", "[", 
      RowBox[{"event_", ",", "pidlist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"indexlist", " ", ",", "i", ",", "j"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"indexlist", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"For", "[", 
            RowBox[{
             RowBox[{"j", " ", "=", " ", "1"}], ",", " ", 
             RowBox[{"j", "\[LessEqual]", 
              RowBox[{"Length", "[", "pidlist", "]"}]}], ",", 
             RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"event", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "pidIndex", "]"}], "]"}], " ", "\[Equal]", " ", 
                 RowBox[{"pidlist", "[", 
                  RowBox[{"[", "j", "]"}], "]"}]}], ",", " ", 
                RowBox[{"indexlist", " ", "=", " ", 
                 RowBox[{"Append", "[", 
                  RowBox[{"indexlist", ",", " ", "i"}], "]"}]}]}], "]"}], ";",
               " ", "Break", ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "indexlist"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"FindTags", "[", 
      RowBox[{"event_", ",", "taglist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"indexlist", " ", ",", "i", ",", "j"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"indexlist", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"For", "[", 
            RowBox[{
             RowBox[{"j", " ", "=", " ", "1"}], ",", " ", 
             RowBox[{"j", "\[LessEqual]", 
              RowBox[{"Length", "[", "taglist", "]"}]}], ",", 
             RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"event", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "tagindex", "]"}], "]"}], " ", "\[Equal]", " ", 
                 RowBox[{"taglist", "[", 
                  RowBox[{"[", "j", "]"}], "]"}]}], ",", " ", 
                RowBox[{"indexlist", " ", "=", " ", 
                 RowBox[{"Append", "[", 
                  RowBox[{"indexlist", ",", " ", "i"}], "]"}]}]}], "]"}], ";",
               " ", "Break", ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "indexlist"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"FindRecon", "[", 
      RowBox[{"event_", ",", "reconlist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"indexlist", " ", ",", "i", ",", "j"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"indexlist", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"For", "[", 
            RowBox[{
             RowBox[{"j", " ", "=", " ", "1"}], ",", " ", 
             RowBox[{"j", "\[LessEqual]", 
              RowBox[{"Length", "[", "reconlist", "]"}]}], ",", 
             RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"event", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "reconindex", "]"}], "]"}], " ", "\[Equal]", 
                 " ", 
                 RowBox[{"reconlist", "[", 
                  RowBox[{"[", "j", "]"}], "]"}]}], ",", " ", 
                RowBox[{"indexlist", " ", "=", " ", 
                 RowBox[{"Append", "[", 
                  RowBox[{"indexlist", ",", " ", "i"}], "]"}]}]}], "]"}], ";",
               " ", "Break", ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "indexlist"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"FindMCRecon", "[", 
      RowBox[{"event_", ",", "reconlist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"indexlist", " ", ",", "i", ",", "j"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"indexlist", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"For", "[", 
            RowBox[{
             RowBox[{"j", " ", "=", " ", "1"}], ",", " ", 
             RowBox[{"j", "\[LessEqual]", 
              RowBox[{"Length", "[", "reconlist", "]"}]}], ",", 
             RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"event", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "MCreconindex", "]"}], "]"}], " ", "\[Equal]", 
                 " ", 
                 RowBox[{"reconlist", "[", 
                  RowBox[{"[", "j", "]"}], "]"}]}], ",", " ", 
                RowBox[{"indexlist", " ", "=", " ", 
                 RowBox[{"Append", "[", 
                  RowBox[{"indexlist", ",", " ", "i"}], "]"}]}]}], "]"}], ";",
               " ", "Break", ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "indexlist"}]}], "\[IndentingNewLine]", "]"}]}], ";"}]}]}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Finding sets of particles based on their pT-ranking in a list\
\>", "Subtitle"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "finds", " ", "pT", " ", "of", " ", "most", " ", "energetic", " ", "jet", 
    " ", "using", " ", "exact", " ", "particle", " ", "IDs"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"jetPIDlist", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{"2", ",", 
       RowBox[{"-", "2"}], ",", "1", ",", 
       RowBox[{"-", "1"}], ",", "3", ",", 
       RowBox[{"-", "3"}], ",", "4", ",", 
       RowBox[{"-", "4"}], ",", "5", ",", 
       RowBox[{"-", "5"}], ",", "6", ",", 
       RowBox[{"-", "6"}], ",", "21"}], "}"}]}], ";"}], "\[IndentingNewLine]",
    "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"obsolete", " ", "naming"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"jetlist", " ", "=", " ", "jetPIDlist"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"\[Mu]PIDlist", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "13"}], ",", "13"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ePIDlist", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "11"}], ",", "11"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"\[Tau]PIDlist", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{"15", ",", 
       RowBox[{"-", "15"}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"leptonPIDlist", " ", "=", " ", 
     RowBox[{"Join", "[", 
      RowBox[{"\[Mu]PIDlist", ",", "ePIDlist", ",", "\[Tau]PIDlist"}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lightleptonPIDlist", " ", "=", " ", 
     RowBox[{"Join", "[", 
      RowBox[{"\[Mu]PIDlist", ",", "ePIDlist"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"bPIDlist", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{"5", ",", 
       RowBox[{"-", "5"}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"HighestJetpT", "[", "event_", "]"}], " ", ":=", " ", 
     RowBox[{"HighestJetpT", "[", 
      RowBox[{"event", ",", "jetlist"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"as", " ", "above"}], ",", " ", 
     RowBox[{
     "except", " ", "we", " ", "can", " ", "specify", " ", "the", " ", 
      "jetlist"}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"HighestJetpT", "[", 
      RowBox[{"event_", ",", " ", "jetlist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"jetpts", ",", " ", "currentparticle", ",", " ", "i"}], "}"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"jetpts", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currentparticle", " ", "=", " ", 
            RowBox[{"event", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{"jetlist", ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "pidIndex", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"jetpts", " ", "=", " ", 
               RowBox[{"Append", "[", 
                RowBox[{"jetpts", ",", " ", 
                 RowBox[{"VectorLength", "[", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}], "]"}]}], 
                "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"Max", "[", "jetpts", "]"}]}]}], "\[IndentingNewLine]", 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"SmallestJetpT", "[", 
      RowBox[{"event_", ",", " ", "jetlist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"jetpts", ",", " ", "currentparticle", ",", " ", "i"}], "}"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"jetpts", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currentparticle", " ", "=", " ", 
            RowBox[{"event", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{"jetlist", ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "pidIndex", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"jetpts", " ", "=", " ", 
               RowBox[{"Append", "[", 
                RowBox[{"jetpts", ",", " ", 
                 RowBox[{"VectorLength", "[", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}], "]"}]}], 
                "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"Min", "[", "jetpts", "]"}]}]}], "\[IndentingNewLine]", 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"AllJetpTVec", "[", 
      RowBox[{"event_", ",", " ", "jetlist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"jetpts", ",", " ", "currentparticle", ",", " ", "i"}], "}"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"jetpts", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currentparticle", " ", "=", " ", 
            RowBox[{"event", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{"jetlist", ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "pidIndex", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"jetpts", " ", "=", " ", 
               RowBox[{"Append", "[", 
                RowBox[{"jetpts", ",", " ", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                   RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}]}], "]"}]}], 
              ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "jetpts"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"AllJetpT", "[", 
      RowBox[{"event_", ",", " ", "jetlist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"jetpts", ",", " ", "currentparticle", ",", " ", "i"}], "}"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"jetpts", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currentparticle", " ", "=", " ", 
            RowBox[{"event", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{"jetlist", ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "pidIndex", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"jetpts", " ", "=", " ", 
               RowBox[{"Append", "[", 
                RowBox[{"jetpts", ",", " ", 
                 RowBox[{"VectorLength", "[", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}], "]"}]}], 
                "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "jetpts"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "finds", " ", "pT", " ", "of", " ", "most", " ", "energetic", " ", "jet", 
     " ", 
     RowBox[{"(", 
      RowBox[{"b", " ", "or", " ", "regular"}], ")"}], " ", "using", " ", 
     "TAGS"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"ONLY", " ", "INPUT", " ", "A", " ", "TAGGED", " ", "EVENT"}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"HighestJetpTTags", "[", "event_", "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"jetpts", ",", " ", "currentparticle", ",", " ", "i"}], "}"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"jetpts", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currentparticle", " ", "=", " ", 
            RowBox[{"event", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"btag", ",", " ", "jettag"}], "}"}], ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "tagindex", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"jetpts", " ", "=", " ", 
               RowBox[{"Append", "[", 
                RowBox[{"jetpts", ",", " ", 
                 RowBox[{"VectorLength", "[", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}], "]"}]}], 
                "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"Max", "[", "jetpts", "]"}]}]}], "\[IndentingNewLine]", 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "finds", " ", "pT", " ", "of", " ", "most", " ", "energetic", " ", "jet", 
     " ", 
     RowBox[{"(", 
      RowBox[{"b", " ", "or", " ", "regular"}], ")"}], " ", "using", " ", 
     "TAGS"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"ONLY", " ", "INPUT", " ", "A", " ", "TAGGED", " ", "EVENT"}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"AllJetpTTags", "[", 
      RowBox[{"event_", ",", " ", "taglist_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"jetpts", ",", " ", "currentparticle", ",", " ", "i"}], "}"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"jetpts", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", "\[LessEqual]", 
           RowBox[{"Length", "[", "event", "]"}]}], ",", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"currentparticle", " ", "=", " ", 
            RowBox[{"event", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{"taglist", ",", " ", 
               RowBox[{"currentparticle", "[", 
                RowBox[{"[", "tagindex", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"jetpts", " ", "=", " ", 
               RowBox[{"Append", "[", 
                RowBox[{"jetpts", ",", " ", 
                 RowBox[{"VectorLength", "[", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pxIndex", "]"}], "]"}], ",", 
                    RowBox[{"currentparticle", "[", 
                    RowBox[{"[", "pyIndex", "]"}], "]"}]}], "}"}], "]"}]}], 
                "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "jetpts"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"AllJetpTTags", "[", "event_", "]"}], " ", ":=", " ", 
     RowBox[{"AllJetpTTags", "[", 
      RowBox[{"event", ",", 
       RowBox[{"{", 
        RowBox[{"btag", ",", " ", "jettag"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]"}]}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "outputs", " ", "the", " ", "number", " ", "of", " ", "particles", " ", 
     "specified", " ", "by", " ", "the", " ", "PIDlist", " ", "that", " ", 
     "have", " ", "pT"}], " ", ">", " ", "minpT"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"NumberJetsWithpTAbovepTMin", "[", 
     RowBox[{"currentevent_", ",", "PIDlist_", ",", "minpT_"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"temp", ",", "temp2", ",", "temp3"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"temp", "=", 
        RowBox[{"AllJetpT", "[", 
         RowBox[{"currentevent", ",", "jetlist"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"temp2", " ", "=", " ", 
        RowBox[{
         RowBox[{"temp", "-", "minpT"}], "//", "Sign"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"temp3", " ", "=", " ", 
        RowBox[{
         RowBox[{"0", " ", "temp2"}], " ", "+", " ", "1"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"Sum", "[", 
        RowBox[{
         FractionBox[
          RowBox[{
           RowBox[{"temp3", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "+", 
           RowBox[{"temp2", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], "2"], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "1", ",", 
           RowBox[{"Length", "[", "temp3", "]"}]}], "}"}]}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}]}]], "Input"]
}, Closed]]
}, Open  ]]
},
Evaluator->"Local",
WindowSize->{763, 605},
WindowMargins->{{Automatic, 48}, {Automatic, 0}},
TrackCellChangeTimes->False,
FrontEndVersion->"9.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (November 20, \
2012)",
StyleDefinitions->FrontEnd`FileName[{"Creative"}, "PastelColor.nb", 
  CharacterEncoding -> "UTF-8"]
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[567, 22, 49, 0, 61, "Title"],
Cell[619, 24, 253, 6, 101, "Text"],
Cell[875, 32, 16, 0, 29, "Text"],
Cell[CellGroupData[{
Cell[916, 36, 55, 0, 22, "Subtitle"],
Cell[974, 38, 9890, 252, 1223, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[10901, 295, 59, 0, 22, "Subtitle"],
Cell[10963, 297, 36, 0, 29, "Text"],
Cell[11002, 299, 6584, 159, 788, "Input"],
Cell[17589, 460, 38, 0, 29, "Text"],
Cell[17630, 462, 4060, 99, 499, "Input"],
Cell[21693, 563, 246, 6, 83, "Text"],
Cell[21942, 571, 632, 14, 90, "Input"],
Cell[22577, 587, 5942, 134, 736, "Input"],
Cell[28522, 723, 10707, 235, 1385, "Input"],
Cell[39232, 960, 472, 12, 90, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[39741, 977, 30, 0, 22, "Subtitle"],
Cell[CellGroupData[{
Cell[39796, 981, 477, 12, 56, "Input"],
Cell[40276, 995, 192, 5, 70, "Output"]
}, Open  ]],
Cell[40483, 1003, 28889, 712, 3376, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[69409, 1720, 33, 0, 22, "Subtitle"],
Cell[CellGroupData[{
Cell[69467, 1724, 41, 0, 35, "Subsection"],
Cell[69511, 1726, 13305, 349, 1247, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[82853, 2080, 33, 0, 35, "Subsection"],
Cell[82889, 2082, 9725, 223, 1345, "Input"],
Cell[92617, 2307, 8034, 184, 872, "Input"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[100700, 2497, 100, 2, 22, "Subtitle"],
Cell[100803, 2501, 136, 4, 65, "Text"],
Cell[100942, 2507, 21804, 583, 2562, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[122783, 3095, 65, 0, 22, "Subtitle"],
Cell[122851, 3097, 27331, 707, 2595, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[150219, 3809, 57, 0, 22, "Subtitle"],
Cell[150279, 3811, 7818, 180, 838, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[158134, 3996, 89, 2, 22, "Subtitle"],
Cell[158226, 4000, 15163, 361, 1403, "Input"],
Cell[173392, 4363, 1549, 42, 170, "Input"]
}, Closed]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
